
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Python &#8212; Python 04-04-2022 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="https://malachov.github.io/mypythontools/tools/sphinx-alabaster-css/custom.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="python">
<h1>Python<a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h1>
<p>It’s also in jupyter notebook ipynb version. Markdown is good for finding correct syntax, notebook is good, when you want to learn something and play with code. It’s derived from original <code class="docutils literal notranslate"><span class="pre">README.md</span></code> so do not edit jupyter itself.</p>
<p>Note 1: Some cells are commented, because can slow notebook, make errors or save files.</p>
<p>Note 2: Some code is in python language, but many lines are for terminal (like cwd for example). If this is the case, you can run it also in terminal, just add <code class="docutils literal notranslate"><span class="pre">!</span> </code> before every command.</p>
<p>Note 3: Jupyter need some libraries for particular tasks. Install it when reach the error, or if you don’t want to install them manually, use chapter 1 Requirements - bulk libraries install, and install all of them from <a class="reference external" href="https://github.com/Malachov/mypythontools/tree/master/content/requirements">My requirements</a></p>
<p>Note 4: Table of Content is not working in jupyter, so delete it. Use nbextensions and extension table of content. If you have no nbextensions, than use:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># !  pip install jupyter_contrib_nbextensions &amp;&amp; jupyter contrib nbextension install

# I recommend Table Of contents, Variable inspector, ExecuteTime, Code Prettify and Autopep8. Just restart jupyter and choose from tab nbextensions.
</pre></div>
</div>
</section>
<section id="table-of-content">
<h1>Table of Content<a class="headerlink" href="#table-of-content" title="Permalink to this headline">¶</a></h1>
<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->
<!-- code_chunk__output -->
<ul class="simple">
<li><p><span class="xref myst">Python</span></p></li>
<li><p><span class="xref myst">Table of Content</span></p></li>
<li><p><span class="xref myst">General</span></p></li>
<li><p><span class="xref myst">Cookiecutter - Project scaffolding</span></p></li>
<li><p><span class="xref myst">Libraries (packages)</span></p>
<ul>
<li><p><span class="xref myst">Pushing to PyPi</span></p></li>
</ul>
</li>
<li><p><span class="xref myst">Virtual environment (venv)</span></p></li>
<li><p><span class="xref myst">Requirements</span></p></li>
<li><p><span class="xref myst">Building app - Pyinstaller</span></p></li>
<li><p><span class="xref myst">Style guide (linting, formatting)</span></p>
<ul>
<li><p><span class="xref myst">PEP 8</span></p></li>
<li><p><span class="xref myst">Black</span></p></li>
<li><p><span class="xref myst">Linting</span></p>
<ul>
<li><p><span class="xref myst">Flake8</span></p></li>
<li><p><span class="xref myst">Pylint</span></p></li>
<li><p><span class="xref myst">Pylance</span></p></li>
<li><p><span class="xref myst">Pydocstyle</span></p></li>
<li><p><span class="xref myst">Bandit</span></p></li>
<li><p><span class="xref myst">Ignore formatting for selection</span></p></li>
</ul>
</li>
<li><p><span class="xref myst">Multi line code</span></p></li>
</ul>
</li>
<li><p><span class="xref myst">Type hints - annotations</span></p>
<ul>
<li><p><span class="xref myst">Type validation</span></p></li>
</ul>
</li>
<li><p><span class="xref myst">Comments</span></p></li>
<li><p><span class="xref myst">Documentation - docstrings</span></p></li>
<li><p><span class="xref myst">Logical conditions (and, or, not…)</span></p>
<ul>
<li><p><span class="xref myst">None</span></p></li>
</ul>
</li>
<li><p><span class="xref myst">Variables</span></p></li>
<li><p><span class="xref myst">Data types</span></p>
<ul>
<li><p><span class="xref myst">String</span></p></li>
<li><p><span class="xref myst">List</span></p></li>
<li><p><span class="xref myst">Tuple</span></p></li>
<li><p><span class="xref myst">Dictionary</span></p></li>
<li><p><span class="xref myst">Named tuple</span></p></li>
<li><p><span class="xref myst">Deque</span></p></li>
<li><p><span class="xref myst">Set</span></p></li>
<li><p><span class="xref myst">Dataframe</span></p></li>
<li><p><span class="xref myst">Numpy Array</span></p></li>
<li><p><span class="xref myst">HDF5</span></p></li>
<li><p><span class="xref myst">Decimal</span></p></li>
</ul>
</li>
<li><p><span class="xref myst">Iterators</span></p></li>
<li><p><span class="xref myst">Conditions (if, else…)</span></p></li>
<li><p><span class="xref myst">Loops</span></p>
<ul>
<li><p><span class="xref myst">For</span></p></li>
<li><p><span class="xref myst">WHILE</span></p></li>
</ul>
</li>
<li><p><span class="xref myst">Functions</span></p>
<ul>
<li><p><span class="xref myst">map(), filter(), reduce()**</span></p></li>
</ul>
</li>
<li><p><span class="xref myst">Generators</span></p></li>
<li><p><span class="xref myst">Decorators</span></p></li>
<li><p><span class="xref myst">Modules</span></p></li>
<li><p><span class="xref myst">Classes</span></p>
<ul>
<li><p><span class="xref myst">Magic methods (dunder methods)</span></p></li>
</ul>
</li>
<li><p><span class="xref myst">Bitwise operations</span></p></li>
<li><p><span class="xref myst">File I/O</span></p>
<ul>
<li><p><span class="xref myst">Open file</span></p></li>
<li><p><span class="xref myst">Manipulate with files (move, copy)</span></p></li>
</ul>
</li>
<li><p><span class="xref myst">Try – Except</span></p></li>
<li><p><span class="xref myst">Built in functions</span></p></li>
<li><p><span class="xref myst">Built in variables</span></p></li>
<li><p><span class="xref myst">Built in modules</span></p>
<ul>
<li><p><span class="xref myst">Sys</span></p></li>
<li><p><span class="xref myst">io</span></p></li>
<li><p><span class="xref myst">os</span></p></li>
<li><p><span class="xref myst">Pathlib - Work with paths</span></p></li>
<li><p><span class="xref myst">Warnings</span></p></li>
<li><p><span class="xref myst">re - Regular expressions</span></p></li>
<li><p><span class="xref myst">Subprocess - Run shell comands</span></p></li>
<li><p><span class="xref myst">Pickle</span></p></li>
<li><p><span class="xref myst">Time and datetime</span></p></li>
</ul>
</li>
<li><p><span class="xref myst">Imported libraries</span></p>
<ul>
<li><p><span class="xref myst">Tests</span></p>
<ul>
<li><p><span class="xref myst">Pytest</span></p></li>
<li><p><span class="xref myst">Doctest</span></p></li>
</ul>
</li>
</ul>
</li>
<li><p><span class="xref myst">doctest: +IGNORE_EXCEPTION_DETAIL</span></p>
<ul>
<li><p><span class="xref myst">Command Line Arguments - argparse</span></p></li>
<li><p><span class="xref myst">Plots, graphs</span></p>
<ul>
<li><p><span class="xref myst">Plotly</span></p></li>
<li><p><span class="xref myst">Matplotlib</span></p></li>
</ul>
</li>
<li><p><span class="xref myst">Tables</span></p></li>
<li><p><span class="xref myst">Web</span></p>
<ul>
<li><p><span class="xref myst">Requests - API - GET, POST</span></p></li>
<li><p><span class="xref myst">Beautiful soup - web scrapping</span></p></li>
</ul>
</li>
<li><p><span class="xref myst">Images, pictures</span></p></li>
<li><p><span class="xref myst">Mathematics, statistics, linear algebra</span></p></li>
<li><p><span class="xref myst">Signal processing and controll</span></p></li>
<li><p><span class="xref myst">Database</span></p>
<ul>
<li><p><span class="xref myst">pyodbc, sqlalchemy</span></p></li>
</ul>
</li>
<li><p><span class="xref myst">GUI</span></p></li>
<li><p><span class="xref myst">Misc</span></p>
<ul>
<li><p><span class="xref myst">Jupyter</span></p></li>
</ul>
</li>
</ul>
</li>
<li><p><span class="xref myst">Performance</span></p>
<ul>
<li><p><span class="xref myst">Profiling</span></p>
<ul>
<li><p><span class="xref myst">Line profiling</span></p></li>
</ul>
</li>
<li><p><span class="xref myst">Garbage collector</span></p></li>
<li><p><span class="xref myst">Threading</span></p></li>
<li><p><span class="xref myst">Max execution time function</span></p></li>
<li><p><span class="xref myst">Numba</span></p></li>
<li><p><span class="xref myst">Dask</span></p></li>
</ul>
</li>
<li><p><span class="xref myst">Miscellaneous</span></p>
<ul>
<li><p><span class="xref myst">Push own library to PyPi</span></p></li>
<li><p><span class="xref myst">CI/CD</span></p></li>
<li><p><span class="xref myst">Create documentation - Sphinx</span></p>
<ul>
<li><p><span class="xref myst">Format</span></p></li>
</ul>
</li>
<li><p><span class="xref myst">Snippets - examples</span></p>
<ul>
<li><p><span class="xref myst">Measure time</span></p></li>
<li><p><span class="xref myst">Show bytecode</span></p></li>
<li><p><span class="xref myst">Encoding JSON with Python</span></p></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- /code_chunk__output -->
</section>
<section id="general">
<h1>General<a class="headerlink" href="#general" title="Permalink to this headline">¶</a></h1>
<p><strong>Show where python is installed</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># On windows
where python

# On linux
which python
</pre></div>
</div>
<p><strong>Python on linux</strong></p>
<p><strong>Use python instead of python3</strong></p>
<p>Add to source ~/.bashrc</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">alias python=python3</span>
<span class="go">alias pip=pip3</span>
</pre></div>
</div>
<p><strong>Open terminal in current folder</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo apt-get install nautilus-open-terminal</span>
</pre></div>
</div>
<p><strong>Set default python on linux</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo apt-get install update-alternatives</span>
<span class="go">sudo update-alternatives --install /usr/bin/python python /usr/bin/python3.8 1</span>
<span class="go">sudo update-alternatives --install /usr/bin/python python /usr/bin/python3.6 2</span>
<span class="go">sudo update-alternatives --config python</span>
</pre></div>
</div>
</section>
<section id="cookiecutter-project-scaffolding">
<h1>Cookiecutter - Project scaffolding<a class="headerlink" href="#cookiecutter-project-scaffolding" title="Permalink to this headline">¶</a></h1>
<p>You can find typical python project structure here</p>
<p><a class="reference external" href="https://github.com/Malachov/mypythontools/tree/master/content/project-starter">Starter project</a></p>
<p>It contains testing files, files for sphinx auto documentation, licence and more.</p>
</section>
<section id="libraries-packages">
<h1>Libraries (packages)<a class="headerlink" href="#libraries-packages" title="Permalink to this headline">¶</a></h1>
<p><strong>Install library</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pip install library_name</span>

<span class="gp"># </span>For anaconda
<span class="go">conda install library_name</span>

<span class="gp"># </span>If conda not work
<span class="go">conda install -c anaconda library_name</span>
</pre></div>
</div>
<p><strong>Install develop version</strong>
This will create links to local pacages, so if you change source and save, it will work in other packages</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pip install -e /path/to/locations/repo</span>
</pre></div>
</div>
<p><strong>Install locally</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pip install .</span>
</pre></div>
</div>
<p><strong>Show installed libraries</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pip list</span>
</pre></div>
</div>
<p><strong>Show outdated libraries</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pip list --outdated
</pre></div>
</div>
<p><strong>If pip cannot be installed by SSL errorr</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pip install ipykernel --upgrade pip --trusted-host pypi.org
</pre></div>
</div>
<section id="pushing-to-pypi">
<h2>Pushing to PyPi<a class="headerlink" href="#pushing-to-pypi" title="Permalink to this headline">¶</a></h2>
<p><strong>Build dist</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python setup.py sdist bdist_wheel
</pre></div>
</div>
<p><strong>Push to PyPi</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>twine upload -u user_name -p password dist/*
</pre></div>
</div>
</section>
</section>
<section id="virtual-environment-venv">
<h1>Virtual environment (venv)<a class="headerlink" href="#virtual-environment-venv" title="Permalink to this headline">¶</a></h1>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pip install virtualenv</span>

<span class="gp"># </span>Create new virtual environment
<span class="go">virtualenv venv</span>

<span class="gp"># </span>Activate virtual env
<span class="go">vevn\Scripts\activate.bat</span>
</pre></div>
</div>
</section>
<section id="requirements">
<h1>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h1>
<p>File that describe all used libraries for some project. You can install all the libraries at once.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pip install -r /path/to/requirements.txt</span>

<span class="gp"># </span>Create requirements
<span class="go">pipreqs --encoding=utf8 C:\VSCODE\Diplomka</span>

<span class="gp"># </span>Deprecated
<span class="gp gp-VirtualEnv">(pip freeze &gt; requirements.txt)</span>
</pre></div>
</div>
<p>You can find much more about libraries in <code class="docutils literal notranslate"><span class="pre">Modules</span></code> section.</p>
</section>
<section id="building-app-pyinstaller">
<h1>Building app - Pyinstaller<a class="headerlink" href="#building-app-pyinstaller" title="Permalink to this headline">¶</a></h1>
<p>You can create binaries with pyinstaller, so other user can run an app even with no python installed.</p>
<p>You don’t even need to install pyinstaller and you can use mypythontools build module (you can use VS Code Task to build an app with single click)</p>
<p><a class="reference external" href="https://mypythontools.readthedocs.io/mypythontools.build.html">Documentation</a> for how to do it.</p>
<p>Build bootloader locally to avoid false positive antivirus alert (in tutorial).</p>
</section>
<section id="style-guide-linting-formatting">
<h1>Style guide (linting, formatting)<a class="headerlink" href="#style-guide-linting-formatting" title="Permalink to this headline">¶</a></h1>
<section id="pep-8">
<h2>PEP 8<a class="headerlink" href="#pep-8" title="Permalink to this headline">¶</a></h2>
<p>If you are not sure how to format code, you can try <a class="reference external" href="https://www.python.org/dev/peps/pep-0008/">pep 8</a> or <a class="reference external" href="https://google.github.io/styleguide/pyguide.html">google style guide</a></p>
</section>
<section id="black">
<h2>Black<a class="headerlink" href="#black" title="Permalink to this headline">¶</a></h2>
<p>Strict auto formatting. Setup longer default line length for better user experience</p>
<p>Example for how to use it in VS Code - Add to settings.json:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;editor.formatOnSave&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
<span class="s2">&quot;python.formatting.blackArgs&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;--line-length&quot;</span><span class="p">,</span> <span class="s2">&quot;110&quot;</span><span class="p">],</span>
</pre></div>
</div>
</section>
<section id="linting">
<h2>Linting<a class="headerlink" href="#linting" title="Permalink to this headline">¶</a></h2>
<p>Show you where problems are. You can use for example Pylint (raise more warnings) or Flake8 (more tolerant)</p>
<section id="flake8">
<h3>Flake8<a class="headerlink" href="#flake8" title="Permalink to this headline">¶</a></h3>
<p>Mostly for formatting (PEP8) issues</p>
<p>This is not necessary as using some autoformating tool</p>
<p>** Ignore line in linting</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>code   =   8  # noqa
</pre></div>
</div>
</section>
<section id="pylint">
<h3>Pylint<a class="headerlink" href="#pylint" title="Permalink to this headline">¶</a></h3>
<p>Also for non-optimal code hints</p>
<p><strong>Ignore for rest all file or block of code</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># pylint: disable=W0201

code_here

# pylint: disable=W0201  # Enable from here on
</pre></div>
</div>
<p><strong>Ignore message on particular line</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>code_here  # pylint: disable=W0201
</pre></div>
</div>
</section>
<section id="pylance">
<h3>Pylance<a class="headerlink" href="#pylance" title="Permalink to this headline">¶</a></h3>
<p>Used for type validation</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>a: int = &quot;bad format&quot;  # type: ignore
</pre></div>
</div>
</section>
<section id="pydocstyle">
<h3>Pydocstyle<a class="headerlink" href="#pydocstyle" title="Permalink to this headline">¶</a></h3>
<p>Checks you docstrings.</p>
<p>Omit lint for function</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>def bad_function():  # noqa: D400
    &quot;&quot;&quot;Omit a period in the docstring as an exception&quot;&quot;&quot;
    pass
</pre></div>
</div>
</section>
<section id="bandit">
<h3>Bandit<a class="headerlink" href="#bandit" title="Permalink to this headline">¶</a></h3>
<p>For security issues</p>
</section>
<section id="ignore-formatting-for-selection">
<h3>Ignore formatting for selection<a class="headerlink" href="#ignore-formatting-for-selection" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># fmt: off</span>

<span class="n">your_code</span> <span class="o">=</span>    <span class="s2">&quot;here&quot;</span>

<span class="c1"># fmt: on</span>
</pre></div>
</div>
</section>
</section>
<section id="multi-line-code">
<h2>Multi line code<a class="headerlink" href="#multi-line-code" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>poi = { &quot;1&quot;: 3,
        &quot;2&quot;: 4,
        &quot;6&quot;: 8 }

a = (   1 + 2
        + 3 + 4 )

f = range(  1 + 2
        + 3 - 4)  # Function example

# or use \
a = 1 + 2 \
    + 3
</pre></div>
</div>
</section>
</section>
<section id="type-hints-annotations">
<h1>Type hints - annotations<a class="headerlink" href="#type-hints-annotations" title="Permalink to this headline">¶</a></h1>
<p>As from python 3.9 it’s not necessary to use typing List, Tuple etc.</p>
<p>For pytnon 3.7, 3.8 you need to add (python 3.6 and less is not supported)</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>from __future__ import annotations, TYPE_CHECKING, get_type_hints
from typing import Any
</pre></div>
</div>
<p>How to annotate basic data types</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>class MyClass:
    unknown: Any
    names: list[str] = [&quot;Guido&quot;, &quot;Jukka&quot;, &quot;Ivan&quot;]
    version: tuple[int, int, int] = (3, 7, 1)
    tuple_unknown: tuple[str, ...] = (&#39;one&#39;, &#39;two&#39;, &#39;three&#39;)
    options: dict[str, bool] = {&quot;centered&quot;: False, &quot;capitalize&quot;: True}
</pre></div>
</div>
<p>How to annotate function return</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>def say_it(word: str) -&gt; str:
    return word
</pre></div>
</div>
<p>It’s possible in class to return itself ()</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>class ReturnMe:
    def(self) -&gt; ReturnMe:
        return self
</pre></div>
</div>
<p>If type not exists yet, you can use Forward Reference (use a string literal). Types are still processed even if in string.
If you need to run some code only for type hints (like import lazy loaded library for type)</p>
<p>from typing TYPE_CHECKING</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>if TYPE_CHECKING:
    import pandas as pd

class Tree:
    def __init__(self, left: &#39;pd.DataFrame&#39;, right: &#39;pd.DataFrame&#39;):
        self.left = left
        self.right = right
</pre></div>
</div>
<p>If you need type hints dynamically in code (for example for type checking)</p>
<p>hints = get_type_hints()</p>
<section id="type-validation">
<h2>Type validation<a class="headerlink" href="#type-validation" title="Permalink to this headline">¶</a></h2>
<p>from typeguard import typechecked</p>
<p>&#64;typechecked
def some_function(a: int, b: float, c: str, *args: str) -&gt; bool:
…
return retval</p>
<p>&#64;typechecked
class SomeClass:
# All type annotated methods (including static and class methods and properties)
# are type checked.
# Does not apply to inner classes!
def method(x: int) -&gt; int:
pass</p>
</section>
</section>
<section id="comments">
<h1>Comments<a class="headerlink" href="#comments" title="Permalink to this headline">¶</a></h1>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># One line comment

## Multiline comment
&quot;&quot;&quot; Víceřádkové komentáře používají tři uvozovky nebo apostrofy
a jsou často využívány jako dokumentační komentáře k metodám
&quot;&quot;&quot;
</pre></div>
</div>
</section>
<section id="documentation-docstrings">
<h1>Documentation - docstrings<a class="headerlink" href="#documentation-docstrings" title="Permalink to this headline">¶</a></h1>
<p>Posible modes - DocBlockR, ReST, Numpy, Google</p>
<p><strong>Google</strong>
<a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/extensions/example_google.html">Sphinx example</a></p>
<p>[Google example]</p>
<p><strong>Numpy</strong>
<a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/extensions/example_numpy.html">Sphinx example</a></p>
<p><strong>reStructured text</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">restr</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39; # remove the variable - it&#39;s just for jupyter</span>
<span class="s1">Section Header</span>
<span class="s1">==============</span>

<span class="s1">Subsection Header</span>
<span class="s1">-----------------</span>

<span class="s1">- A bullet list item</span>

<span class="s1">- A sub item</span>

<span class="s1">1) An enumerated list item</span>

<span class="s1">.. image:: /path/to/image.jpg</span>

<span class="s1">A sentence with links to `Wikipedia`_</span>

<span class="s1">.. _Wikipedia: https://www.wikipedia.org/</span>

<span class="s1">+------------------------+------------+----------+</span>
<span class="s1">| Header row, column 1   | Header 2   | Header 3 |</span>
<span class="s1">+========================+============+==========+</span>
<span class="s1">| body row 1, column 1   | column 2   | column 3 |</span>
<span class="s1">+------------------------+------------+----------+</span>
<span class="s1">| body row 2             | Cells may span        |</span>
<span class="s1">+------------------------+-----------------------+</span>

<span class="s1">Literal - no linebreaks etc.</span>

<span class="s1">::</span>

<span class="s1">some literal text.</span>


<span class="s1">Python code in docstrings</span>

<span class="s1">.. code:: python</span>

<span class="s1">print(&quot;A literal block directive explicitly marked as python code&quot;)</span>
<span class="s1">&#39;&#39;&#39;</span>
</pre></div>
</div>
<p><strong>docBlockR</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Function to find optimal parameters of function</span>
<span class="sd">======</span>
<span class="sd">Output:</span>
<span class="sd">------</span>
<span class="sd">    Optimized parameters {dict}</span>

<span class="sd">Arguments:</span>
<span class="sd">------</span>
<span class="sd">    model {func} -- Function to be optimized (eg: ridgeregression)</span>
<span class="sd">    kwargs {dict} -- Initial arguments (eg: {&quot;alpha&quot;: 0.1, &quot;n_steps_in&quot;: 10})</span>
<span class="sd">    kwargs_limits {dict} -- Bounds of arguments (eg: {&quot;alpha&quot;: [0.1, 1], &quot;n_steps_in&quot;:[2, 30]})</span>
<span class="sd">    data {list, array, dataframe col} -- Data on which function is optimized (eg: data1)</span>
<span class="sd">    fragments {int} -- Number of optimized intervals (default: 10)</span>
<span class="sd">    predicts {int} -- Number of predicted values (default: 7)</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
</section>
<section id="logical-conditions-and-or-not">
<h1>Logical conditions (and, or, not…)<a class="headerlink" href="#logical-conditions-and-or-not" title="Permalink to this headline">¶</a></h1>
<p><strong>Not</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>not True # =&gt; False
&#39;a&#39; is not 1
&#39;a&#39; != 1
</pre></div>
</div>
<p><strong>Greater than, lower than</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt;=
</pre></div>
</div>
<p><strong>And, or</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>0 and 2 # =&gt; 0
-5 or 0 # =&gt; -5
0 == False # =&gt; True
if 2 &gt; 1 and 5 &gt; 6:
    pass

# Logical conditions can be combined

1 &lt; 2 &lt; 3 # =&gt; True
</pre></div>
</div>
<section id="none">
<h2>None<a class="headerlink" href="#none" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># None is object (NULL, nil, ...)

None  # =&gt; None

# So don&#39;t use &quot;==&quot; for comparison. Rather use &quot;is&quot;

None is None # =&gt; True

# None, 0, and empty string/list/dictionary is False, everything else True

bool(0) # =&gt; False
bool(&quot;&quot;) # =&gt; False
bool([]) # =&gt; False
bool({}) # =&gt; False
</pre></div>
</div>
</section>
</section>
<section id="variables">
<h1>Variables<a class="headerlink" href="#variables" title="Permalink to this headline">¶</a></h1>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>y = int(2.8)

x = 1
x += 1 # Zkrácený zápis x = x + 1. Pozor, žádné x++ neexisuje

# Int divided by int

3 / 2  # = 1.5
3 // 2  # = 1
</pre></div>
</div>
<p><strong>Declaration of more variables at once</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>a = b = c = 1  # If i change one, it doesn&#39;t affect the others

a,b,c = 1,2,&quot;john&quot;
</pre></div>
</div>
<p><strong>Swap variables values</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>e = 2; d = 4
e, d = d, e # d is now 5, e is now 4
</pre></div>
</div>
<p><strong>Bulk create variables</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>name = [&#39;mike&#39;, &#39;john&#39;, &#39;steve&#39;]
age = [20, 32, 19]

for x,y in zip(name, age):
    globals()[x] = y  # mike = 20 ...

uname = [&#39;u{}&#39;.format(n) for n in range(7)] # [u1, u2, u3...]
</pre></div>
</div>
<p><strong>Check if variable exist</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>if &#39;myVar&#39; in locals():
    pass
</pre></div>
</div>
<p><strong>Import variables from other modules</strong></p>
<p>Creat config.py</p>
<p>There for example</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>x = 1
</pre></div>
</div>
<p>In main then use</p>
<p>config.x = 2 ….</p>
<p><strong>Find name of variable, list or dictionary</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>var = 3
my_var_name = [k for k,v in globals().items() if v == var][0]
</pre></div>
</div>
</section>
<section id="data-types">
<h1>Data types<a class="headerlink" href="#data-types" title="Permalink to this headline">¶</a></h1>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>a = type(var)  # Return type
</pre></div>
</div>
<p><strong>Type of variable as condition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>if isinstance(var, str):  # Check if it&#39;s string (or int etc...)
    pass

# More types at once

import numpy as np
y = np.array([1])
isinstance(y, (np.ndarray, np.generic))  # pd.DataFrame For dataframe

if a is list: # Zjistí, zda jde přímo o string
    pass

# Also work if object is includes in class
</pre></div>
</div>
<section id="string">
<h2>String<a class="headerlink" href="#string" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="n">a</span> <span class="o">=</span> <span class="s2">&quot;This is string.&quot;</span>
<span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;This is also string.&#39;</span>

<span class="c1"># In python 3</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;strings are now utf-8 </span><span class="se">\u03BC</span><span class="s1">nico</span><span class="se">\u0394</span><span class="s1">é!&#39;</span><span class="p">)</span>  <span class="c1"># strings are now utf-8 μnicoΔé!</span>

<span class="c1"># Strings can use + but don&#39;t use</span>

<span class="n">a</span> <span class="o">=</span> <span class="s2">&quot;Hello &quot;</span> <span class="o">+</span> <span class="s2">&quot;world!&quot;</span> <span class="c1"># =&gt; &quot;Hello world!&quot;</span>

<span class="c1"># Can be concatenated without &#39;+&#39;</span>

<span class="n">a</span> <span class="o">=</span> <span class="s2">&quot;Hello &quot;</span> <span class="s2">&quot;world!&quot;</span> <span class="c1"># =&gt; &quot;Hello world!&quot;</span>

<span class="c1"># String is list of symbols</span>

<span class="n">a</span> <span class="o">=</span> <span class="s2">&quot;This is list&quot;</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># =&gt; &#39;T&#39;</span>
</pre></div>
</div>
<p><strong>Format - depracated</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Old</span>

<span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">  </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">)</span>

<span class="c1"># Newer</span>

<span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">)</span>

<span class="c1"># Format can be used multiple times</span>

<span class="n">a</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> </span><span class="si">{1}</span><span class="s2"> stříkaček stříkalo přes </span><span class="si">{0}</span><span class="s2"> </span><span class="si">{1}</span><span class="s2"> střech&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;tři sta třicet tři&quot;</span><span class="p">,</span> <span class="s2">&quot;stříbrných&quot;</span><span class="p">)</span>

<span class="c1"># You can use named arguments</span>

<span class="n">a</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{jmeno}</span><span class="s2"> si dal </span><span class="si">{jidlo}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">jmeno</span><span class="o">=</span><span class="s2">&quot;Franta&quot;</span><span class="p">,</span> <span class="n">jidlo</span><span class="o">=</span><span class="s2">&quot;guláš&quot;</span><span class="p">)</span> <span class="c1"># =&gt; &quot;Franta si dal guláš&quot;</span>
</pre></div>
</div>
<p><strong>f-strings - Correct way to format</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Peter&#39;</span>
<span class="sa">f</span><span class="s2">&quot;Hello, </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">. You are </span><span class="si">{</span><span class="mi">2</span> <span class="o">*</span> <span class="mi">17</span><span class="si">}</span><span class="s2">. Also functions </span><span class="si">{</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">.&quot;</span>

<span class="c1"># You can use raw strings (no escape characters, but still format)</span>

<span class="n">a</span> <span class="o">=</span> <span class="mi">15</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">fr</span><span class="s1">&#39;Escape is here:\n but still </span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>  <span class="c1"># Escape is here:\n but still 15</span>

<span class="c1"># Keep quotes in f-strings</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;He said his name is </span><span class="si">{</span><span class="n">name</span><span class="si">!r}</span><span class="s1">.&#39;</span><span class="p">)</span>  <span class="c1"># &quot;He said his name is &#39;Fred&#39;.&quot;</span>

<span class="c1"># If you use &quot;&quot;&quot; no escape symbols will be used&quot;&quot;&quot;</span>
<span class="c1"># Also can use dictionaries, but &quot;&quot; is necesarry</span>
<span class="c1"># Dont use # in f strings</span>

</pre></div>
</div>
<p><strong>Eval - String to code</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mycode = &#39;x = 1&#39;
exec(mycode)

# or
x = eval(&quot;2+2&quot;) # number ze stringu
</pre></div>
</div>
<p><strong>Join - concatenate</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>words = [&quot;this&quot;, &#39;is&#39;, &#39;a&#39;, &#39;list&#39;, &#39;of&#39;, &quot;strings&quot;]
&#39; &#39;.join(words)  #returns &quot;This is a list of strings&quot;
</pre></div>
</div>
</section>
<section id="list">
<h2>List<a class="headerlink" href="#list" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="n">empty_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">lst</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">lst</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># lst is now [1, 2, 3, 4, 1]</span>
<span class="n">lst</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># insert 2 on index 1</span>
<span class="n">lst</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>  <span class="c1"># Remove last value</span>
<span class="n">lst</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># Remove first 2 in list</span>
<span class="k">del</span> <span class="n">lst</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># Delete first element</span>
<span class="k">del</span> <span class="n">lst</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span>  <span class="c1"># Range delete - from the last one</span>
<span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">lst</span> <span class="o">+</span> <span class="n">b</span>  <span class="c1"># Serializes</span>
<span class="n">lst</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>  <span class="c1"># Serializes</span>
</pre></div>
</div>
<p><strong>List comprehensions</strong></p>
<p>Way to create a list</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>u_list = [&#39;u{}&#39;.format(n) for n in range(1, 6)]
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Print list</span>
<span class="nb">print</span><span class="p">(</span><span class="o">*</span><span class="n">a</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="p">)</span>

<span class="c1"># If lst a = lst b and we change one of them, the other also change therefor</span>

<span class="n">lista</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">listb</span> <span class="o">=</span> <span class="n">lista</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">listb</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>
<span class="nb">print</span><span class="p">(</span><span class="n">lista</span><span class="p">)</span>  <span class="c1"># [1, 2, 5]</span>

<span class="c1">### Access members</span>

<span class="n">lst</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">lst</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># =&gt; 1</span>
<span class="n">lst</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># =&gt; 3</span>

<span class="c1">### Slices</span>

<span class="n">lst</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>  <span class="c1"># =&gt; [2, 4]</span>
<span class="n">lst</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>  <span class="c1"># =&gt; [4, 3]</span>
<span class="n">lst</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span> <span class="c1"># =&gt; [1, 2, 4]</span>

<span class="c1"># Every second member</span>

<span class="n">lst</span><span class="p">[::</span><span class="mi">2</span><span class="p">]</span> <span class="c1"># =&gt;[1, 4]</span>

<span class="c1">### Minimum</span>

<span class="n">youngest</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span>

<span class="c1">### Find maximum and it&#39;s index</span>

<span class="n">m</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span>
<span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">if</span> <span class="n">j</span> <span class="o">==</span> <span class="n">m</span><span class="p">]</span> <span class="c1"># pro a = [1,2,0]  # 1</span>

<span class="c1">### Sum</span>

<span class="n">suma</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span>

<span class="c1">### If member exist</span>

<span class="mi">1</span> <span class="ow">in</span> <span class="n">lst</span> <span class="c1"># =&gt; True</span>

<span class="c1">### Length of list</span>

<span class="nb">len</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span> <span class="c1"># =&gt; 6</span>

<span class="c1">### Every value just once</span>

<span class="n">t</span> <span class="o">=</span>  <span class="p">[</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">2</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">2</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span>  <span class="mi">6</span><span class="p">,</span>  <span class="mi">7</span><span class="p">,</span>  <span class="mi">8</span><span class="p">]</span>
<span class="n">lst</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>  <span class="c1"># [1,  2,  3,  5,  6,  7,  8]</span>

<span class="c1">### Reverse</span>

<span class="n">rev</span> <span class="o">=</span> <span class="n">lst</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># =&gt; [3, 4, 2, 1]</span>

<span class="c1"># Or</span>

<span class="n">rev</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>

<span class="c1">### Iterate in reverse order</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">lst</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="c1">### Check if list is empty or not</span>

<span class="n">a</span> <span class="o">=</span> <span class="mi">6</span>
<span class="k">if</span> <span class="n">a</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">a</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="c1">### Create list from 0 to 10</span>

<span class="n">l</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="c1">#  [0,  1,  2,  3,  4,  5,  6,  7,  8,  9]</span>

<span class="c1">### Create list - List comprehension</span>

<span class="p">[</span><span class="n">x</span><span class="o">*</span><span class="mi">5</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span> <span class="c1">#[0, 5, 10, 15, 20]</span>
<span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span> <span class="c1">#[0, 2, 4]</span>
<span class="p">[</span><span class="n">a</span> <span class="k">if</span> <span class="n">a</span> <span class="k">else</span>  <span class="mi">2</span>  <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span>  <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">]]</span>

<span class="c1"># List comprehension from more entities</span>

<span class="n">list_1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">list_2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="p">[(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">list_1</span><span class="p">,</span> <span class="n">list_2</span><span class="p">)]</span> <span class="c1"># [(1, &#39;a&#39;), (2, &#39;b&#39;...]</span>

<span class="c1">### Zip lists</span>

<span class="nb">zip</span><span class="p">(</span><span class="n">list_1</span><span class="p">,</span> <span class="n">list_2</span><span class="p">)</span> <span class="c1"># {(a1, b1), (a2, b2)}</span>

<span class="c1">### Logical condition on lists</span>

<span class="n">j2</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">list_1</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;=</span>  <span class="mi">5</span><span class="p">]</span>

<span class="c1">### One value more times</span>

<span class="n">listOfStr</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Hi&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span> <span class="c1"># [&#39;Hi&#39;, &#39;Hi&#39;, &#39;Hi&#39;]</span>

<span class="c1">### Multiple list</span>

<span class="n">my_list</span> <span class="o">=</span>  <span class="p">[</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">2</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span>  <span class="mi">4</span><span class="p">,</span>  <span class="mi">5</span><span class="p">]</span>
<span class="n">my_new_list</span> <span class="o">=</span>  <span class="p">[</span><span class="n">i</span> <span class="o">*</span>  <span class="mi">5</span>  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">my_list</span><span class="p">]</span>

<span class="c1">### Find index</span>

<span class="n">my_list</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="c1">### Nested lists</span>

<span class="n">t</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>  <span class="c1"># 4</span>

<span class="c1">### Every first member of nested lists</span>

<span class="n">L</span> <span class="o">=</span> <span class="p">[[[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">],[</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">]],</span>  <span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">],[</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">]],</span>  <span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">],[</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">]]]</span>
<span class="n">R</span> <span class="o">=</span> <span class="p">[[</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">sl</span> <span class="p">]</span>  <span class="k">for</span> <span class="n">sl</span> <span class="ow">in</span> <span class="n">L</span> <span class="p">]</span>  <span class="c1"># [[0, 3, 6], [0, 3, 6], [0, 3, 6]]</span>

<span class="c1"># Or</span>

<span class="n">lst</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],[</span><span class="mi">11</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">13</span><span class="p">],[</span><span class="mi">21</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">23</span><span class="p">]]</span>
<span class="n">a</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">lst</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># [1, 11, 21]</span>

<span class="c1">### Add first with first, second with second</span>

<span class="p">[</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">list_1</span><span class="p">,</span> <span class="n">list_2</span><span class="p">)]</span>

<span class="c1">### List of functions</span>

<span class="k">def</span> <span class="nf">func1</span><span class="p">():</span><span class="k">return</span> <span class="mi">1</span>
<span class="k">def</span> <span class="nf">func2</span><span class="p">():</span><span class="k">return</span> <span class="mi">2</span>
<span class="k">def</span> <span class="nf">func3</span><span class="p">():</span><span class="k">return</span> <span class="mi">3</span>
<span class="n">fl</span> <span class="o">=</span> <span class="p">[</span><span class="n">func1</span><span class="p">,</span><span class="n">func2</span><span class="p">,</span><span class="n">func3</span><span class="p">]</span>
<span class="p">[</span><span class="n">f</span><span class="p">()</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fl</span><span class="p">]</span> <span class="c1"># [1, 2, 3]</span>

<span class="c1">### How many times members in list</span>

<span class="kn">import</span> <span class="nn">collections</span>
<span class="nb">print</span><span class="p">(</span> <span class="n">collections</span><span class="o">.</span><span class="n">Counter</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">]))</span>
</pre></div>
</div>
</section>
<section id="tuple">
<h2>Tuple<a class="headerlink" href="#tuple" title="Permalink to this headline">¶</a></h2>
<p>Tuple is like list but imutable !!! [] i can change - () i cannot change !!!</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>tuple = (1, 2, 3)
tuple[0]  # =&gt; 1
# tuple[0] = 3  # Raise TypeError

a, = 5  # (5)
</pre></div>
</div>
</section>
<section id="dictionary">
<h2>Dictionary<a class="headerlink" href="#dictionary" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>empty_dic = {}
dic = {&quot;jedna&quot;: 1, &quot;dva&quot;: 2, &quot;tři&quot;: 3}
</pre></div>
</div>
<p><strong>Dict comprehension</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>dic_variable = {key:value for (key,value) in dic.items()}
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">### Add value</span>

<span class="n">dic</span><span class="p">[</span><span class="s1">&#39;čtyři&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span>  <span class="c1"># If key is already there it&#39;s updated</span>

<span class="c1">### Add more values at once</span>

<span class="n">dic</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;čtyři&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;pět&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">})</span>


<span class="c1">### Create dictionary from two lists</span>

<span class="n">name</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;mike&#39;</span><span class="p">,</span> <span class="s1">&#39;john&#39;</span><span class="p">,</span> <span class="s1">&#39;steve&#39;</span><span class="p">]</span>
<span class="n">age</span> <span class="o">=</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">19</span><span class="p">]</span>
<span class="n">dic</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">))</span>

<span class="c1">### Assign multiple keys to one value</span>

<span class="n">my_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="mi">10</span><span class="p">)</span>

<span class="c1">### Miscelanious</span>

<span class="n">thisdict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">}</span>
<span class="k">del</span> <span class="n">thisdict</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">]</span>  <span class="c1"># delete list</span>
<span class="s1">&#39;e&#39;</span> <span class="ow">in</span> <span class="n">thisdict</span>  <span class="c1"># returns False</span>
<span class="n">thisdict</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>  <span class="c1"># returns [(&#39;a&#39;, 1), (&#39;c&#39;, &#39;eggs&#39;)]</span>

<span class="c1"># All keys</span>

<span class="n">dic</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

<span class="c1"># You need list sometimes not iterables</span>

<span class="nb">list</span><span class="p">(</span><span class="n">dic</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

<span class="c1">### Last key in dictionary</span>

<span class="nb">max</span><span class="p">(</span><span class="n">dic</span><span class="p">)</span>

<span class="c1">### For cycle for all keys</span>

<span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">dic</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

<span class="c1">### Maximum value and its index</span>

<span class="n">stats</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span><span class="mi">1000</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span><span class="mi">3000</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">}</span>
<span class="n">maxname</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">stats</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">stats</span><span class="o">.</span><span class="n">get</span><span class="p">)</span>
<span class="n">maxvalue</span> <span class="o">=</span> <span class="n">stats</span><span class="p">[</span><span class="n">maxname</span><span class="p">]</span>

<span class="c1">### Values</span>

<span class="nb">list</span><span class="p">(</span><span class="n">dic</span><span class="o">.</span><span class="n">values</span><span class="p">())</span> <span class="c1"># =&gt; [3, 2, 1]</span>
<span class="s2">&quot;jedna&quot;</span> <span class="ow">in</span> <span class="n">dic</span> <span class="c1"># =&gt; True if value is in dictionary</span>
<span class="n">dic</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;čtyři&quot;</span><span class="p">)</span> <span class="c1"># =&gt; None - don&#39;t raise error if key not in dic</span>
<span class="n">dic</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;pět&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="c1"># dic[&quot;pět&quot;] default 5</span>

<span class="c1">### Find key from value</span>

<span class="nb">list</span><span class="p">(</span><span class="n">stats</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="nb">list</span><span class="p">(</span><span class="n">stats</span><span class="o">.</span><span class="n">values</span><span class="p">())</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">100</span><span class="p">)]</span>

<span class="c1">### For cycle for dictionaries</span>

<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">stats</span><span class="p">:</span> <span class="c1"># Iteruje přes všechny klíče</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>

<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">stats</span><span class="o">.</span><span class="n">items</span><span class="p">():</span> <span class="c1"># Iteruje řes všechny klíče a hodnoty</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>

<span class="c1">### Join two dictionaries</span>

<span class="n">c</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">dic</span><span class="p">,</span> <span class="o">**</span><span class="n">stats</span><span class="p">}</span>

<span class="c1">### Enumerate in dictionaries</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">dic</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
    <span class="k">pass</span>

<span class="c1">### Dictionary as arguments into function</span>

<span class="k">def</span> <span class="nf">rep</span><span class="p">(</span><span class="o">*</span><span class="n">nonamed</span><span class="p">,</span> <span class="o">**</span><span class="n">named</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">nonamed</span><span class="p">,</span> <span class="n">named</span>

<span class="n">t</span> <span class="o">=</span> <span class="p">(</span><span class="mi">47</span><span class="p">,</span><span class="mi">11</span><span class="p">)</span>
<span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span><span class="s1">&#39;extract&#39;</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="p">:</span><span class="s1">&#39;yes&#39;</span><span class="p">}</span>
<span class="n">rep</span><span class="p">(</span><span class="o">*</span><span class="n">t</span><span class="p">,</span> <span class="o">**</span><span class="n">d</span><span class="p">)</span> <span class="c1"># It&#39;s the same as f(47, 11, x=extract, y=yes)</span>

<span class="c1">### Nested dictionaries - for examples name of functions and it&#39;s parameters</span>

<span class="k">def</span> <span class="nf">rep2</span><span class="p">(</span><span class="o">*</span><span class="n">inp</span><span class="p">,</span> <span class="o">**</span><span class="n">inp2</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">rep</span>

<span class="n">models</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;AR (Autoregression)&quot;</span><span class="p">:</span> <span class="n">rep</span><span class="p">,</span> <span class="s2">&quot;Linear neural unit&quot;</span><span class="p">:</span> <span class="n">rep2</span><span class="p">}</span>
<span class="n">modelsparameters</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;AR (Autoregression)&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;predicts&quot;</span><span class="p">:</span>  <span class="mi">2</span><span class="p">},</span> <span class="s2">&quot;Linear neural unit&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;predicts&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}}</span>
<span class="n">modelscomplet</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">models</span><span class="o">.</span><span class="n">values</span><span class="p">(),</span>  <span class="n">modelsparameters</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
<span class="n">modelsresults</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">modelscomplet</span><span class="p">:</span>
    <span class="n">modelsresults</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="n">i</span><span class="p">:</span> <span class="n">j</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="n">k</span><span class="p">)})</span>

<span class="c1">### Nested dictionaries - Find minimum</span>

<span class="n">top</span> <span class="o">=</span> <span class="mi">1000000</span>
<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">modelsparameters</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">inkey</span><span class="p">,</span> <span class="n">invalue</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">invalue</span> <span class="o">&lt;</span> <span class="n">top</span><span class="p">:</span>
            <span class="n">best_model_name</span> <span class="o">=</span> <span class="n">key</span>
            <span class="n">best_data</span> <span class="o">=</span> <span class="n">inkey</span>
            <span class="n">top</span> <span class="o">=</span> <span class="n">invalue</span>

<span class="c1">### Dictionary comprehension</span>

<span class="p">{</span><span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)}</span> <span class="c1"># =&gt; {1: 1, 2: 4, 3: 9, 4: 16}</span>
<span class="p">{</span><span class="n">pismeno</span> <span class="k">for</span> <span class="n">pismeno</span> <span class="ow">in</span> <span class="s2">&quot;abeceda&quot;</span><span class="p">}</span> <span class="c1"># =&gt; {&quot;d&quot;, &quot;a&quot;, &quot;c&quot;, &quot;e&quot;, &quot;b&quot;}</span>
</pre></div>
</div>
<p><strong>Two dictionaries intersection</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>d1 = {&#39;a&#39;: 1, &#39;b&#39;: 2}
d2 = {&#39;b&#39;: 2, &#39;c&#39;: 3}

d1.viewkeys() &amp; d2.viewkeys()  # {&#39;b&#39;}

# Or with set
a = { &#39;x&#39; : 1, &#39;y&#39; : 2, &#39;z&#39; : 3 }
b = { &#39;u&#39; : 1, &#39;v&#39; : 2, &#39;w&#39; : 3, &#39;x&#39;  : 1, &#39;y&#39;: 2 }
set( a.keys() ) &amp; set( b.keys() )  # Output set([&#39;y&#39;, &#39;x&#39;])
set( a.items() ) &amp; set( b.items())  # Output set([(&#39;y&#39;, 2), (&#39;x&#39;, 1)])
</pre></div>
</div>
</section>
<section id="named-tuple">
<h2>Named tuple<a class="headerlink" href="#named-tuple" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>from typing import NamedTuple

class class_name(NamedTuple):
    field1: datatype
    field2: datatype
</pre></div>
</div>
<p>This is equivalent to:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>class_name = collections.namedtuple(&#39;class_name&#39;, [&#39;field1&#39;, &#39;field2&#39;])
</pre></div>
</div>
<p>Named tuples are very good when function returns complicated structure. This can brings docstrings, type hints and same structure like classical return.</p>
</section>
<section id="deque">
<h2>Deque<a class="headerlink" href="#deque" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">You</span> <span class="n">can</span> <span class="n">iterate</span> <span class="kn">from</span> <span class="nn">both</span> <span class="n">sides</span>

<span class="kn">import</span> <span class="nn">collections</span>
<span class="n">de</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">deque</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="n">de</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># Add x to the right side of the deque.</span>
<span class="n">de</span><span class="o">.</span><span class="n">appendleft</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>  <span class="c1"># Add x to the left side of the deque.</span>
<span class="n">de</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># Count the number of deque elements equal to x.</span>
<span class="n">lst</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">de</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span>  <span class="c1"># Extend the right side of the deque by appending elem   ents from the iterable argument.</span>
<span class="n">de</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>  <span class="c1"># Remove and return an element from the right side of the deque. If no elements are present, raises an IndexError.</span>
<span class="n">de</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>  <span class="c1"># Remove and return an element from the left side of the deque. If no elements are present, raises an IndexError.</span>
<span class="n">de</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># Remove the first occurrence of value. If not found, raises a ValueError.</span>
<span class="n">de</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>  <span class="c1"># Reverse the elements of the deque in-place and then return None.</span>
<span class="n">de</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Rotate the deque n steps to the right. If n is negative, rotate to the left.</span>
<span class="n">de</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>  <span class="c1"># Remove all elements from the deque leaving it with length 0.</span>
</pre></div>
</div>
</section>
<section id="set">
<h2>Set<a class="headerlink" href="#set" title="Permalink to this headline">¶</a></h2>
<p>It is not oredered and every value is just once!</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">empty_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
<span class="n">sett</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">}</span>  <span class="c1"># {1, 2, 3, 4}</span>
<span class="n">sett</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>  <span class="c1"># {1, 2, 3, 4, 5}</span>
<span class="n">jina_set</span> <span class="o">=</span> <span class="p">{</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">}</span>

<span class="c1"># Intersect of 2 sets</span>

<span class="n">sett</span> <span class="o">&amp;</span> <span class="n">jina_set</span> <span class="c1"># =&gt; {3, 4, 5}</span>

<span class="c1"># Union</span>

<span class="n">sett</span> <span class="o">|</span> <span class="n">jina_set</span> <span class="c1"># =&gt; {1, 2, 3, 4, 5, 6}</span>

<span class="c1"># Exception</span>

<span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">}</span> <span class="o">-</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">}</span> <span class="c1"># =&gt; {1, 4}</span>

<span class="c1"># If member exist</span>

<span class="mi">2</span> <span class="ow">in</span> <span class="n">sett</span> <span class="c1"># =&gt; True</span>
<span class="mi">9</span> <span class="ow">in</span> <span class="n">sett</span> <span class="c1"># =&gt; False</span>
</pre></div>
</div>
</section>
<section id="dataframe">
<h2>Dataframe<a class="headerlink" href="#dataframe" title="Permalink to this headline">¶</a></h2>
<p>Panda library is necessary
If there is a parameter inplace=True, then changes are made on original, otherwise change is only made for new variable assign</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">### Import from csv</span>

<span class="n">impt</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">import pandas as pd</span>
<span class="s1">data = pd.read_csv(</span>
<span class="s1">    &quot;data/files/complex_data_example.tsv&quot;,</span>
<span class="s1">    sep=&#39;</span><span class="se">\t</span><span class="s1">&#39;,  # Tab-separated value file.</span>
<span class="s1">    quotechar=&quot;&#39;&quot;,  # single quote allowed as quote character</span>
<span class="s1">    dtype={&quot;salary&quot;: int},  # Parse the salary column as an integer</span>
<span class="s1">    usecols=[&#39;name&#39;, &#39;birth_date&#39;].  # Only columns</span>
<span class="s1">    parse_dates=[&#39;birth_date&#39;],  # Intepret the birth_date column as a date</span>
<span class="s1">    skiprows=10,  # Skip the first 10 rows of the file</span>
<span class="s1">    na_values=[&#39;.&#39;, &#39;??&#39;]  # Take any &#39;.&#39; or &#39;??&#39; values as NA</span>
<span class="s1">)</span>
<span class="s1">&#39;&#39;&#39;</span>

<span class="c1">### Save into CSV</span>

<span class="c1"># df.to_csv(&#39;newcsv.csv&#39;) # bez názvů , header=False</span>

<span class="c1">### Create</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="c1"># one column dataframe</span>

<span class="n">s2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>

<span class="c1"># dataframe</span>

<span class="n">s2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>

<span class="c1"># from list</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;tom&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;nick&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;juli&#39;</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">])</span>

<span class="c1"># from dictionary</span>

<span class="nb">dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="n">newdatf</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="nb">dict</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">)</span>

<span class="c1"># from array</span>

<span class="n">array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]])</span>
<span class="c1">#df2 = pd.DataFrame(data=array[1:,1:], index=range(len(data)), columns=data[0,1:])</span>

<span class="c1">### Access column</span>

<span class="n">df</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>

<span class="c1">### Subset of columns - Access members</span>

<span class="c1"># With name</span>

<span class="n">df1</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="s1">&#39;age&#39;</span><span class="p">]]</span>

<span class="c1"># with index</span>

<span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span>  <span class="c1">#   # All rows, first and second column</span>

<span class="n">df3</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># First row</span>

<span class="c1">### Column to new dataframe</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">)</span>

<span class="c1">### Return name of column from index</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># Columns return name of column</span>

<span class="c1">### Find index from column name</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">get_loc</span><span class="p">(</span><span class="s2">&quot;age&quot;</span><span class="p">)</span>

<span class="c1">### Logical conditions</span>

<span class="n">df_new</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;juli&#39;</span><span class="p">]</span>

<span class="c1">### Concat 2 columns</span>

<span class="n">df</span><span class="p">[</span><span class="s1">&#39;name_and_age&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">])</span>

<span class="c1">### Make index from colmn</span>

<span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">drop</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1">### Convert into array</span>

<span class="n">df</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
<span class="n">b</span><span class="o">=</span><span class="n">df1</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">values</span>  <span class="c1"># every column separately</span>

<span class="c1">### Convert into list</span>

<span class="n">lst</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="c1">### Miscelaneous</span>

<span class="n">df</span><span class="o">.</span><span class="n">index</span>  <span class="c1"># RangeIndex(start=0, stop=x....)</span>
<span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>  <span class="c1"># age  int ...</span>

<span class="c1">### Lenght of dataframe</span>

<span class="n">length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>

<span class="c1">### Date and time and datetime, range</span>

<span class="c1"># Datetime from values</span>

<span class="n">year</span> <span class="o">=</span> <span class="mi">2020</span><span class="p">;</span> <span class="n">month</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span> <span class="n">day</span> <span class="o">=</span> <span class="mi">14</span><span class="p">;</span> <span class="n">hour</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">start</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="n">month</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="n">day</span><span class="p">,</span> <span class="n">hour</span><span class="o">=</span><span class="n">hour</span><span class="p">)</span>

<span class="c1"># Range</span>

<span class="n">df</span><span class="p">[</span><span class="s1">&#39;EventStart&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">start</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="n">length</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;H&#39;</span><span class="p">)</span>

<span class="c1"># Convert from datetime to time, the same to datetime</span>

<span class="n">df</span><span class="p">[</span><span class="s1">&#39;EventStart_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;EventStart&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">time</span>

<span class="c1">### Set index</span>

<span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;EventStart&#39;</span><span class="p">,</span> <span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>

<span class="c1">### Sort index</span>
<span class="n">data_for_predictions_full</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1">### Resample datetime dataframe</span>

<span class="n">df_res</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="c1"># Méně řádků na výstupu</span>

<span class="c1">### Copy of dataframe</span>

<span class="c1"># !!! If you use variables., change in one is also changed in the others, so if you want independent dataframes, use copy() !!!</span>

<span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="c1">### Add column on index 0</span>
<span class="n">df</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;New column&#39;</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">])</span>  <span class="c1"># (loc, column, value)</span>

<span class="c1">### Pop, extract column to variable and drop it from original</span>
<span class="n">df</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="c1">### Move column on index 1</span>
<span class="n">df</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;predicted_column_name&#39;</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">predicted_column_name</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>

<span class="c1">### Join 2 dataframes</span>

<span class="c1">#### Concat</span>
<span class="c1"># possible parameters - axis, join, ignore_index, sort, keys, levels</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">]],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;letter&#39;</span><span class="p">,</span> <span class="s1">&#39;number&#39;</span><span class="p">])</span>
    <span class="c1">#         letter  number</span>
    <span class="c1">#    0      a       1</span>
    <span class="c1">#    1      b       2</span>
    <span class="c1">#    2      c       3</span>

<span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([[</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">]],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;letter&#39;</span><span class="p">,</span> <span class="s1">&#39;number2&#39;</span><span class="p">])</span>

    <span class="c1">#        letter  number</span>
    <span class="c1">#    0      c       1</span>
    <span class="c1">#    1      d       2</span>
    <span class="c1">#    2      e       3</span>

<span class="c1"># Add rows</span>

<span class="n">df_rows</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df</span><span class="p">,</span> <span class="n">df2</span><span class="p">])</span>

    <span class="c1">#        letter  number  number2</span>
    <span class="c1">#    0      a     1.0      NaN</span>
    <span class="c1">#    1      b     2.0      NaN</span>
    <span class="c1">#    2      c     3.0      NaN</span>
    <span class="c1">#    0      c     NaN      1.0</span>
    <span class="c1">#    1      d     NaN      2.0</span>
    <span class="c1">#    2      e     NaN      3.0</span>

    <span class="c1"># join=&#39;inner&#39; means only columns that are in both dfs</span>

<span class="c1"># Add columns</span>

<span class="n">df_columns</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df</span><span class="p">,</span> <span class="n">df2</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="c1">#        letter  number letter  number</span>
    <span class="c1">#    0      a       1      c       1</span>
    <span class="c1">#    1      b       2      d       2</span>
    <span class="c1">#    2      c       3      e       3</span>

<span class="c1"># or you can use</span>

<span class="n">df4</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">df2</span><span class="p">)</span>
    <span class="c1">#         letter  number  number2</span>
    <span class="c1">#    0      a     1.0      NaN</span>
    <span class="c1">#    1      b     2.0      NaN</span>
    <span class="c1">#    2      c     3.0      NaN</span>
    <span class="c1">#    0      c     NaN      1.0</span>
    <span class="c1">#    1      d     NaN      2.0</span>
    <span class="c1">#    2      e     NaN      3.0</span>

<span class="c1">### Merge</span>
<span class="c1"># Add database parameters like left join, outer join</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df2</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;letter&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>

    <span class="c1">#        letter  number  number2</span>
    <span class="c1">#    0      a       1      NaN</span>
    <span class="c1">#    1      b       2      NaN</span>
    <span class="c1">#    2      c       3      1.0</span>

<span class="c1">### Group by</span>

<span class="n">gpd</span> <span class="o">=</span> <span class="n">df4</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;letter&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">&#39;number&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span> <span class="s1">&#39;number2&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">size</span><span class="p">})</span>

    <span class="c1">#        number  number2</span>
    <span class="c1">#  letter</span>
    <span class="c1">#    a         1.0     1.0</span>
    <span class="c1">#    b         2.0     1.0</span>
    <span class="c1">#    c         3.0     2.0   # c only once, not twice</span>
    <span class="c1">#    d         NaN     1.0</span>
    <span class="c1">#    e         NaN     1.0</span>

<span class="c1">#### Get all from one group</span>

<span class="n">gpd</span> <span class="o">=</span> <span class="n">df4</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;letter&#39;</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">get_group</span><span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">)</span>

    <span class="c1">#        letter  number  number2</span>
    <span class="c1">#    2      c     3.0      NaN</span>
    <span class="c1">#    0      c     NaN      1.0</span>

<span class="c1">### Mean, standard deviation</span>

<span class="n">mean</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;number&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">std</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;number&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>

<span class="c1">### Rolling (moving) average and standard deviation</span>

<span class="n">rolling_mean</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;number&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">rolling_std</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;number&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>

<span class="c1"># Change axis</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">moveaxis</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">shape</span>
<span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

<span class="c1">### Remove outliers</span>

<span class="n">df_removed_outliers</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;number&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">std</span><span class="p">)</span> <span class="p">]</span>

<span class="c1">### Remove not a number columns</span>
<span class="n">gpd</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">([</span><span class="s1">&#39;number&#39;</span><span class="p">])</span>

<span class="c1">### Transpose - Rows into columns</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">T</span>
</pre></div>
</div>
</section>
<section id="numpy-array">
<h2>Numpy Array<a class="headerlink" href="#numpy-array" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
a = ar[1, 2]  # 5 - Access array
a = np.append(a, 3)  # Add element to the end
a = np.insert(a,1,[11,12])  # Into a on index 1 insert [11,12], next parameter can be axis
np.roll(a,2) # Posune array o 2 doprava
wo = np.array([1,2,3]) # Shape (3,)
wo = np.array([[1,2,3,4,5]]) # Shape (1,5)
wo = np.array([[1],[2],[3],[4],[5]]) # Shape (5,1)
shape = np.shape(a) # `(n,m) Number of rows, columns etc.
ar.shape[0]  # How many rows`

## Convert

a = np.array([1, 2, 3])
my_list = ar.tolist()  # Convert on list
one_dim_list = np.array(ar).reshape(-1).tolist()  # Convert to one-dimensional list
a_scal = a[0].item()  # from np.int convert on int

### Convert to other dtype

b = a.astype(int)  # convert on np.int


### Slicing

a = np.array([[1,2,3],[3,4,5],[4,5,6]])

    #    [[1 2 3]
    #     [3 4 5]
    #     [4 5 6]]

# Only column - not retain shape

b = a[:, 1]  # [2 4 5]

# Columns with same shape

b = a[:, 1:2]  #   [[2]
                #    [4]
                #    [5]]

# Only rows

b = a[1, :]

# Fancy indexing - Selecting with boolean mask

a = np.array([1, 2, 3, 4, 5, 6, 7])
mask = (a % 3 == 0)  # [False False True False False True False]
a = a[mask]  # [3, 6]

# Selecting subset of matrix with np.take

a = np.array([[4, 3, 5], [5, 7, 4], [6, 5,  8], [6, 5 , 8]])
b = np.take(a, [1, 2], axis=0)  # Must use axis, else flattened
            #  [[5 7 4]
            #   [6 5 8]]

b = np.take(a, [1, 2], axis=1)
            #  [[3 5]
            #   [7 4]
            #   [5 8]
            #   [5 8]]

# Swap two rows

data[[0, 2], :] = data[[2, 0], :]

### Join matrixes

np.vstack([a,a])

    #   [[1, 2, 3],
    #    [3, 4, 5],
    #    [4, 5, 6],
    #    [1, 2, 3],
    #    [3, 4, 5],
    #    [4, 5, 6]])

np.hstack([a,a])

    #    [[1, 2, 3, 1, 2, 3],
    #     [3, 4, 5, 3, 4, 5],
    #     [4, 5, 6, 4, 5, 6]]

# Swap two columns

a[:,[0, 1]] = a[:,[1, 0]]

# Create matrix from vectors

a = np.array([1, 2, 3])
b = np.array([2, 3, 4])
c = np.stack((a, b))    # [[1, 2, 3],
                        #  [2, 3, 4]]

# Concatenate

a = np.array([[1, 2], [3, 4]])
b = np.array([[5, 6]])
np.concatenate((a, b), axis=0)
                                        # array([[1, 2],
                                        #        [3, 4],
                                        #        [5, 6]])
np.concatenate((a, b.T), axis=1)
                                        #  array([[1, 2, 5],
                                        #         [3, 4, 6]])
np.concatenate((a, b), axis=None)
                                        # array([1, 2, 3, 4, 5, 6])

# Append
# Add column

x = np.array([[10,20,30], [40,50,60]])
y = np.array([[100], [200]])
z = np.append(x, y, axis=1)

    #   [[ 10  20  30 100]
    #    [ 40  50  60 200]]

### Find minimum value

min = np.amin(c, axis=1)

### Mean

mean = np.mean(x)

### Find maximum or minimum absolute values
aa = max(a.min(), a.max(), key=abs)  # ! Can be the negative one and keep the sign

### Standard deviation

std = np.std(x)

### Limit array values
​
aa = np.array([1., 2., 3., -4, 5, 6])
np.minimum(aa, 3, out=aa)  # array([ 1.,  2.,  3., -4.,  3.,  3.])

### Find index of smallest value

ind = np.unravel_index(np.argmin(a), shape=a.shape)

### Create zero or ones matrix of given shape

zeros = np.zeros_like(a)

# Ones

ones = np.ones((3,3))

    #   [[1., 1., 1.],
    #    [1., 1., 1.],
    #    [1., 1., 1.]]

### Save slice scope to variable
the_slice = np.index_exp[1:]  # the_slice = numpy.index_exp[1:3, 1:3]

### Replace all values with logical condition

a[a &gt; .5] = .5

### Delete member

a = np.delete(a, 1, axis=0) # There need to be variable before!  axis 0 are rows, 1 are columns

### Numpy negative - invert logic
# Use ~

### If nan in array

reality_results_matrix[iterated_model_index, data_length_index]

### Delete Nan values

a = a[~np.isnan(a)]

### Delete all rows where are Nan

a = a[~np.isnan(a).any(axis=1)]

### Replace nan with number

a = np.nan_to_num(a, 0)

### Delete all members that are bigger than condition
aa = np.array([1, 2, 3, 4, 1, 0, 0, 0.2])
b = np.where(aa&gt;=1,aa,1)

### Rolling slides
window = 2
aaa = np.array([1, 2, 3, 4])
bbb = np.array([[1, 2, 3, 4], [3, 4, 5, 6]])
shape = aaa.shape[:-1] + (aaa.shape[-1] - window + 1, window)
shape_b = bbb.shape[:-1] + (bbb.shape[-1] - window + 1, window)
strides = aaa.strides + (aaa.strides[-1],)
strides_b = bbb.strides + (bbb.strides[-1],)
ppp = np.lib.stride_tricks.as_strided(aaa, shape=shape, strides=strides)  #[[[1 2], [2 3], [3 4]]
qqq = np.lib.stride_tricks.as_strided(bbb, shape=shape_b, strides=strides_b)


            # [[[1 2]
            #   [2 3]
            #   [3 4]]
            #
            #  [[3 4]
            #   [4 5]
            #   [5 6]]]

### Sums

# Axis 0 is for sums on columns

np.sum([[0, 1], [0, 5]], axis=0)  # array([0, 6])
np.sum([[0, 1], [0, 5]], axis=1)  # array([1, 5])

### Dot product / multiplication

# Asterisk means each with each not matrix multiplication

# For vectors

x = np.array([1,2,3])
w = np.array([1,2,3])
v = x*w # [1, 4, 9]
v = np.dot(x, w) # 14

x = np.array([1,2,3])
w = np.array([[1],[2],[3]])
v = x*w

    #   [[1 2 3]
    #    [2 4 6]
    #    [3 6 9]]

v = np.dot(x, w) # 14

# For matrixes

x = np.array([[1,2,3], [1,2,3], [1,2,3]])
w = np.array([[1,2,3], [1,2,3], [1,2,3]])
v = x*w

    #   [[1 4 9]
    #    [1 4 9]
    #    [1 4 9]]

v = np.dot(x, w)

    #   [[6 12 18]
    #    [6 12 18]
    #    [6 12 18]]

### Shape

z = np.array([[1, 2, 3, 4],
                [5, 6, 7, 8],
                [9, 10, 11, 12]])
z.shape  # (3, 4)

### Number of members - count

count = z.size

### Cumulative sum

y = np.cumsum(x)

### Set min and max
a = np.array([10, 7, 4, 3, 2, 2, 5, 9, 0, 4, 6, 0])
print (np.clip(a,2,6))  # [6 6 4 3 2 2 5 6 2 4 6 2]

### Find members that are not in other array
a = np.array([1, 2, 3, 4, 5, 6, 7, 8, 9])
b = np.array([3,4,7,6,7,8,11,12,14])
c = np.setdiff1d(a,b)  # array([1, 2, 5, 9])

### Remove non unique values

unique = np.unique(array, axis=0)

### Reshape

# reshape -1 add members automatically
z_res = z.reshape(-1) # array([ 1,  2,  3,  4,  5,  6])
z_res2 = z.reshape(-1,1)

    # array([[ 1],
    #        [ 2],
    #        [ 3],
    #        [ 4],
    #        [ 5],
    #        [ 6]])

z_res3 = z.reshape(-1, 2)
    # array([[ 1,  2],
    #        [ 3,  4],
    #        [ 5,  6],
    #        [ 7,  8],
    #        [ 9, 10],
    #        [11, 12]])

a = np.array([[1,2,3], [4,5,6]])

a_res = np.reshape(a, 6, order=&#39;F&#39;)
    # array([1, 4, 2, 5, 3, 6])

### Transpose

z = np.array([[[1, 1, 1, 1],
                [1, 1, 1, 1],
                [1, 1, 1, 1]],

                [[2, 2, 2, 2],
                [2, 2, 2, 2],
                [2, 2, 2, 2]],

                [[3, 3, 3, 3],
                [3, 3, 3, 3],
                [3, 3, 3, 3]]
                ])

z_tran = z.transpose(1, 0, 2)  # From (10, 100, 1000) create (10, 1000, 100)

    #    array([[[1, 1, 1, 1],
    #            [2, 2, 2, 2],
    #            [3, 3, 3, 3]],
    #
    #           [[1, 1, 1, 1],
    #            [2, 2, 2, 2],
    #            [3, 3, 3, 3]],
    #
    #           [[1, 1, 1, 1],
    #            [2, 2, 2, 2],
    #            [3, 3, 3, 3]]])

z_tran = z.transpose(1, 2, 0)

    #   array([[[1, 2, 3],
    #           [1, 2, 3],
    #           [1, 2, 3],
    #           [1, 2, 3]],
    #
    #          [[1, 2, 3],
    #           [1, 2, 3],
    #           [1, 2, 3],
    #           [1, 2, 3]],
    #
    #          [[1, 2, 3],
    #           [1, 2, 3],
    #           [1, 2, 3],
    #           [1, 2, 3]]])

### Generate points, arange, linspace, random and generate sin

q = np.random.randn(3, 3)
t = np.linspace(0,20,1000)  # Generate numbers with the same interval (beginning, end, number)
t = np.arange(1, 3, 1)  # Start, stop, step - [1, 2]
t = np.arange(3)  # 0, 1, 2
y = np.sin(t)

### Find index (one) with max / min value

np.argmax(x)  # or argmin. Also can use parameter axis

### Iterate more members

A = np.array([1, 2, 3, 4, 5, 6])
for i in range(len(A)):
    indices = range(i-1,i+1)
    neighbourhood = A.take(indices, mode=&#39;clip&#39;)  # mode wrap use other end of array on bounds, raise raise error
    print(neighbourhood)
                            # [1 1]
                            # [1 2]
                            # [2 3]
                            # [3 4]
                            # [4 5]
                            # [5 6]

# Or
A = np.array([1, 2, 3, 4, 5, 6, 7, 8, 9, 10])
neighbourhood = np.zeros(4)
for i in range(1, len(A)):
    if i &lt; len(neighbourhood):
        neighbourhood[-i:] = A[:i]
    else:
        neighbourhood = A[i-4:i]
    print(neighbourhood)

                            # [0. 0. 0. 1.]
                            # [0. 0. 1. 2.]
                            # [0. 1. 2. 3.]
                            # [1 2 3 4]
                            # [2 3 4 5]
                            # [3 4 5 6]
                            # [4 5 6 7]
                            # [5 6 7 8]
                            # [6 7 8 9]

### Eigen values

eig = np.linalg.eig(q)

eigenvalues, V = np.linalg.eig(A)  # eigenvalues[0] is the first eigenvalue
# V is a 2D array (matrix) that contains the four eigenvectors as columns, hence, V[:,i] is the eigenvector corresponding to the eigenvalue eigenvalues[i]

plt.scatter(eigenvalues.real, eigenvalues.imag)  # Plot it

### Inverse matrix

q_inv = np.linalg.inv(q)

### Determinant

det = np.linalg.det(q)

### Fill with Nan values

z = np.zeros((2, 3))
z.fill(np.nan)

### Check if Nan values

if not np.isnan(np.any(z)):
    pass

### Zip for arrays

def azip(*args):
    iters = [iter(arg) for arg in args]
    for i in itertools.count():
        yield tuple([it.next() for it in iters])

# Check which blas / lapack library you use - never use default. Use Intel mkl or atlas
np.__config__.show()
</pre></div>
</div>
</section>
<section id="hdf5">
<h2>HDF5<a class="headerlink" href="#hdf5" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">### Create</span>

<span class="sd">import h5py</span>
<span class="sd">import numpy as np</span>

<span class="sd">arr = np.random.randn(1000)</span>

<span class="sd">with h5py.File(&#39;random.hdf5&#39;, &#39;w&#39;) as f:</span>
<span class="sd">    dset = f.create_dataset(&quot;default&quot;, data=arr)</span>

<span class="sd">### Read</span>

<span class="sd">with h5py.File(&#39;random.hdf5&#39;, &#39;r&#39;) as f:</span>
<span class="sd">    data = f[&#39;default&#39;]</span>
<span class="sd">    print(min(data))</span>

<span class="sd">### Specify Data Types to Optimize Space</span>

<span class="sd">with h5py.File(&#39;several_datasets.hdf5&#39;, &#39;w&#39;) as f:</span>
<span class="sd">    dset_int_1 = f.create_dataset(&#39;integers&#39;, (10, ), dtype=&#39;i1&#39;)</span>
<span class="sd">    dset_int_8 = f.create_dataset(&#39;integers8&#39;, (10, ), dtype=&#39;i8&#39;)</span>
<span class="sd">    dset_complex = f.create_dataset(&#39;complex&#39;, (10, ), dtype=&#39;c16&#39;)</span>
<span class="sd">    dset_int_1[0] = 1200</span>
<span class="sd">&#39;&#39;&#39;</span>
</pre></div>
</div>
</section>
<section id="decimal">
<h2>Decimal<a class="headerlink" href="#decimal" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="n">In</span> <span class="n">normal</span> <span class="nb">float</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="mi">2</span> <span class="p">(</span><span class="n">but</span> <span class="mf">2.0000000000001</span><span class="o">...</span><span class="p">)</span>
<span class="n">In</span> <span class="n">decimal</span> <span class="n">it</span><span class="s1">&#39;s equal</span>

<span class="kn">import</span> <span class="nn">decimal</span>
<span class="c1"># Decimal</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.1&#39;</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.2&#39;</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="c1"># returns a Decimal representing exactly 0.3</span>

<span class="c1"># Rounding</span>
<span class="s2">&quot;</span><span class="si">%.3f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="mf">1.2399</span> <span class="c1"># returns &quot;1.240&quot;</span>
<span class="s2">&quot;</span><span class="si">%.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="mf">1.2</span> <span class="c1"># returns &quot;1.20&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="iterators">
<h1>Iterators<a class="headerlink" href="#iterators" title="Permalink to this headline">¶</a></h1>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>iterable = [1, 2, 3]
iterator = iter(iterable)
</pre></div>
</div>
<p>Next value</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>next(iterator) # =&gt; &quot;one&quot;
</pre></div>
</div>
</section>
<section id="conditions-if-else">
<h1>Conditions (if, else…)<a class="headerlink" href="#conditions-if-else" title="Permalink to this headline">¶</a></h1>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>variable = [10, 20, 30]
for i in variable:
    if variable:
        print(&quot;variable exist&quot;)
    if i &gt; 10:
        print(&quot;Something&quot;)
        pass  # Do nothing
    elif i &lt; 10:
        print(&quot;Variable is smaller than 10&quot;)
        continue # Jump to other operation
    else:
        print(&quot;Variable is 10 or not a number&quot;)
        break # Jump out of the cycle
</pre></div>
</div>
<p><strong>Ternary operator - If in argument</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>variable = 3
state = &quot;nice&quot; if variable else &quot;not nice&quot;
</pre></div>
</div>
<p><strong>Other shortened syntax</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>a = 4
b = 3
x = 77
y = 66
result = (y, x)[a &gt; b]  # y if [True], x if [False]
</pre></div>
</div>
</section>
<section id="loops">
<h1>Loops<a class="headerlink" href="#loops" title="Permalink to this headline">¶</a></h1>
<section id="for">
<h2>For<a class="headerlink" href="#for" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>for zvire in [&quot;pes&quot;, &quot;kočka&quot;, &quot;myš&quot;]:
    print(&quot;zvire&quot;)
for i in range(4):
    print(i)
for i in range(4, 8):
    print(i)
colors  =  [&quot;red&quot;,  &quot;green&quot;,  &quot;blue&quot;,  &quot;purple&quot;]
for  i  in  range(len(colors)):
    print(colors[i])
</pre></div>
</div>
<p><strong>Return indexes and elements</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ints = [8, 23, 45, 12, 78]
for idx, val in enumerate(ints):
    print(idx, val)
</pre></div>
</div>
<p><strong>Break out of nested loop</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>for x in xrange(10):
    for y in xrange(10):
        print x*y
        if x*y &gt; 50:
            break
    else:
        continue  # only executed if the inner loop did NOT break
    break  # only executed if the inner loop DID break
</pre></div>
</div>
<p><strong>Generate values with strings</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>for k in range(5):
    exec(f&#39;cat_{k} = k*2&#39;)
</pre></div>
</div>
<p><strong>For in list comprehension</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[x*5 for x in range(5)] #[0, 5, 10, 15, 20]
</pre></div>
</div>
<p><strong>Generate list with for cycle and if</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[x for x in range(5) if x%2 == 0]  #[0, 2, 4]
[a if a else  2  for a in  [0,1,0,3]]
</pre></div>
</div>
<p><strong>Generate list with more parameters</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>list1 = [1, 2, 3]
list2 = [3, 4, 5]
[a + b for a, b in zip(list1, list2)]
</pre></div>
</div>
<p><strong>Nested lists</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>a = [[1,2,3],[2,3,4],[5,6,7]]
print(a[1][1])
</pre></div>
</div>
</section>
<section id="while">
<h2>WHILE<a class="headerlink" href="#while" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>x = 0
while x &lt; 4:
    print(x)
    x += 1

# You can use it also somewhere where you don&#39;t want to stop

while True:
    listen_forever()
</pre></div>
</div>
</section>
</section>
<section id="functions">
<h1>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h1>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>def secist(x, y):  # Create new function with def
    return x + y  # Return values with return

secist(5, 6)  # Call the function with parameters, return 11
secist(y=6, x=5)  # Named arguments

def return_arguments(*argumenty):  # Variable number of arguments
    return argumenty

return_arguments(1, 2, 3)  # =&gt; (1, 2, 3)

def return_named_arguments(**pojmenovane_argumenty):  # Varaiable number of named arguments
    return pojmenovane_argumenty

return_named_arguments(kdo=&quot;se bojí&quot;, nesmi=&quot;do lesa&quot;)  # {&quot;kdo&quot;: &quot;se bojí&quot;, &quot;nesmi&quot;: &quot;do lesa&quot;}

def return_all(*args, **kwargs):  # You can use combination
    print(args, kwargs)  # Return all parameters
</pre></div>
</div>
<p><strong>Jump out of function - return</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>def print_var():
    a = 8
    if a &gt; 5:
        return
    print_var(2)
</pre></div>
</div>
<p><strong>Default parameter</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>def funkce(y, lags=50): #If we use lags in call, it will be overwritten
    return 1
</pre></div>
</div>
<p><strong>Unknown number of parameters - *args, **kwargs</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>def print_all(*args, **kwargs):
    print(args, kwargs)

print_all(1, 2, a=3, b=4) # Use: (1, 2) {&quot;a&quot;: 3, &quot;b&quot;: 4}
tuple = (1, 2, 3, 4)
dic = {&quot;a&quot;: 3, &quot;b&quot;: 4}
print_all(tuple)  # Is like print_all((1, 2, 3, 4)). One parameter - tuple
print_all(*tuple)  # Is like print_all(1, 2, 3, 4)
print_all(**dic)  # Is like print_all(a=3, b=4)
print_all(*tuple, **dic)  # Is like print_all(1, 2, 3, 4, a=3, b=4)
</pre></div>
</div>
<p><strong>Global variables</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>x = 5
def setx(cislo):  # Local variable override global
    x = cislo  # =&gt; 43
    print(x)  # =&gt; 43


def setglobalx():
    global x
    print(x)  # =&gt; 5
    x = cislo  # Set global x on 6, so x = 6 also outside the function !!!
print(x)  # =&gt; 6
</pre></div>
</div>
<p><strong>Functions are objects</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>def adder(pricitane_cislo):
    def scitacka(x):
        return x + pricitane_cislo
    return scitacka
add_10 = adder(10)
add_10(3)  # =&gt; 13
</pre></div>
</div>
<p><strong>callable</strong></p>
<p>Is object function or not</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>if callable(a):
    pass
</pre></div>
</div>
<p><strong>Function in list generator</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[add_10(i) for i in [1, 2, 3]]  # =&gt; [11, 12, 13]
[x for x in [3, 4, 5, 6, 7] if x &gt; 5]  # =&gt; [6, 7]
</pre></div>
</div>
<p><strong>Parse function arguments</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>import inspect
frame = inspect.currentframe()
args, _, _, values = inspect.getargvalues(frame)
</pre></div>
</div>
<section id="map-filter-reduce">
<h2>map(), filter(), reduce()**<a class="headerlink" href="#map-filter-reduce" title="Permalink to this headline">¶</a></h2>
<p>From the functional programming</p>
<p>Map call funtion (first parameter) on all objects (second parameter)</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>map(add_10, [1, 2, 3])
</pre></div>
</div>
<p>Filter create list (First paratemer), where function is true (second parameter)</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>number_list = range(-5, 5)
less_than_zero = list(filter(lambda x: x &lt; 0, number_list))
print(less_than_zero)  # [-5, -4, -3, -2, -1]
</pre></div>
</div>
<p>Reduce - Input sequention into function</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>from functools import reduce
def do_sum(x1, x2): return x1 + x2
reduce(do_sum, [1, 2, 3, 4]) # 10
</pre></div>
</div>
</section>
</section>
<section id="generators">
<h1>Generators<a class="headerlink" href="#generators" title="Permalink to this headline">¶</a></h1>
<p>Generators are functions, that instead return have yield</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>def multiplier_2(sequention):
    for i in sequention:
        yield 2 * i
</pre></div>
</div>
<p>Generator generate values one after one, when it\s needed. Instead of been generated all at once
Example of generator is range(10000)</p>
</section>
<section id="decorators">
<h1>Decorators<a class="headerlink" href="#decorators" title="Permalink to this headline">¶</a></h1>
<p>Dekorators are functions, that wrap other functions, by that
it can change it’s behavior.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>def nekolikrat(puvodni_funkce):
    def repeat_function(*args, **kwargs):
        for i in range(3):
            puvodni_funkce(*args, **kwargs)
    return repeat_function

@nekolikrat
def pozdrav(Name):
    print(&quot;Bye {}!&quot;.format(Name))

pozdrav(&quot;Dan&quot;)  # Return 3x: Bye Dan!
</pre></div>
</div>
<p><strong>Use decorator with condition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>from memory_profiler import profile
use_decorator = False

def empty_decorator(fu):
    return fu

if use_decorator == False :
    profile = empty_decorator

@profile
def fu():
    print(&#39;content&#39;)
</pre></div>
</div>
</section>
<section id="modules">
<h1>Modules<a class="headerlink" href="#modules" title="Permalink to this headline">¶</a></h1>
<p>Module in python is file with .py on the end. It is also imported python library (e.g. numpy…).</p>
<p>You can create your own and import it.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>from math import sqrt

help(sqrt)  # Help with module

dir(sqrt)  #  Show objects in module

### Manual import
_temp = __import__(&#39;spam.ham&#39;, globals(), locals(), [&#39;eggs&#39;, &#39;sausage&#39;], 0)
eggs = _temp.eggs
saus = _temp.sausage

### Import module from path

import importlib.util
spec = importlib.util.spec_from_file_location(&quot;module.name&quot;, &quot;/path/to/file.py&quot;)
foo = importlib.util.module_from_spec(spec)
spec.loader.exec_module(foo)

### Check if module installed without import

importlib.find_loader(module_name)

### Reimport module
import importlib
importlib.reload(config)
</pre></div>
</div>
<p><strong>Import all scripts in folder (e.g. in <strong>init</strong>.py)</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>import os
from os.path import dirname, basename, isfile, join
import glob
modules = glob.glob(join(dirname(__file__), &quot;*.py&quot;))
__all__ = [ basename(f)[:-3] for f in modules if isfile(f) and not f.endswith(&#39;__init__.py&#39;)]
</pre></div>
</div>
</section>
<section id="classes">
<h1>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h1>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>

<span class="k">class</span> <span class="nc">Clovek</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>  <span class="c1"># Class Human is child (it inherits from) class object</span>

    <span class="n">druh</span> <span class="o">=</span> <span class="s2">&quot;H. sapiens&quot;</span>  <span class="c1"># Class variable - it&#39;s shared with all objects</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">jmeno</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">jmeno</span> <span class="o">=</span> <span class="n">jmeno</span>  <span class="c1"># Add parameter to object</span>

    <span class="k">def</span> <span class="nf">rekni</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hlaska</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{jmeno}</span><span class="s2">: </span><span class="si">{hlaska}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">jmeno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">jmeno</span><span class="p">,</span> <span class="n">hlaska</span><span class="o">=</span><span class="n">hlaska</span><span class="p">)</span>

    <span class="nd">@classmethod</span>  <span class="c1"># First parameter is class and can be changed in subclasses</span>
    <span class="k">def</span> <span class="nf">vrat_druh</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">druh</span>

    <span class="nd">@staticmethod</span>  <span class="c1"># Do not depend on object - like a normal function and is immutable</span>
    <span class="k">def</span> <span class="nf">odkaslej_si</span><span class="p">():</span>
        <span class="k">return</span> <span class="s2">&quot;*ehm*&quot;</span>

<span class="c1"># If no inheritance, no parenthesses prefered, just class Clovek:</span>
<span class="c1"># Class can inherit from more classes at once...</span>
<span class="c1"># class Clovek(tvor, bytost):</span>

<span class="k">class</span> <span class="nc">DecoratorExample</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Decorator_Example&#39;</span>

    <span class="k">def</span> <span class="nf">example_function</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;I</span><span class="se">\&#39;</span><span class="s1">m an instance method!&#39;</span><span class="p">)</span>

<span class="n">de</span> <span class="o">=</span> <span class="n">DecoratorExample</span><span class="p">()</span>
<span class="n">de</span><span class="o">.</span><span class="n">example_function</span><span class="p">()</span>


<span class="c1"># Example of class method</span>

<span class="k">class</span> <span class="nc">Date</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">day</span> <span class="o">=</span> <span class="n">day</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">month</span> <span class="o">=</span> <span class="n">month</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">year</span> <span class="o">=</span> <span class="n">year</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_string</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">date_as_string</span><span class="p">):</span>
        <span class="n">day</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">year</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">date_as_string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">))</span>
        <span class="n">date1</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">day</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">year</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">date1</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">is_date_valid</span><span class="p">(</span><span class="n">date_as_string</span><span class="p">):</span>
        <span class="n">day</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">year</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">date_as_string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">day</span> <span class="o">&lt;=</span> <span class="mi">31</span> <span class="ow">and</span> <span class="n">month</span> <span class="o">&lt;=</span> <span class="mi">12</span> <span class="ow">and</span> <span class="n">year</span> <span class="o">&lt;=</span> <span class="mi">3999</span>

<span class="n">date2</span> <span class="o">=</span> <span class="n">Date</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="s1">&#39;11-09-2012&#39;</span><span class="p">)</span>
<span class="n">is_date</span> <span class="o">=</span> <span class="n">Date</span><span class="o">.</span><span class="n">is_date_valid</span><span class="p">(</span><span class="s1">&#39;11-09-2012&#39;</span><span class="p">)</span>

<span class="c1">### Create object</span>

<span class="n">d</span> <span class="o">=</span> <span class="n">Clovek</span><span class="p">(</span><span class="n">jmeno</span><span class="o">=</span><span class="s2">&quot;David&quot;</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">Clovek</span><span class="p">(</span><span class="s2">&quot;Adéla&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">rekni</span><span class="p">(</span><span class="s2">&quot;ahoj&quot;</span><span class="p">))</span>  <span class="c1"># &quot;David: ahoj&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">rekni</span><span class="p">(</span><span class="s2">&quot;nazdar&quot;</span><span class="p">))</span>  <span class="c1"># &quot;Adéla: nazdar&quot;</span>

<span class="c1">### Call class method</span>

<span class="n">d</span><span class="o">.</span><span class="n">vrat_druh</span><span class="p">()</span> <span class="c1"># =&gt; &quot;H. sapiens&quot;</span>

<span class="c1">### Change atribute of class</span>

<span class="n">d</span><span class="o">.</span><span class="n">vrat_druh</span><span class="p">()</span> <span class="c1"># =&gt; &quot;H. neanderthalensis&quot;</span>
<span class="n">a</span><span class="o">.</span><span class="n">vrat_druh</span><span class="p">()</span> <span class="c1"># =&gt; &quot;H. neanderthalensis&quot;</span>

<span class="c1">### Call static method</span>

<span class="n">Clovek</span><span class="o">.</span><span class="n">odkaslej_si</span><span class="p">()</span> <span class="c1"># =&gt; &quot;*ehm*&quot;</span>

<span class="c1">### Check if class has atribute (method or )</span>
<span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">Clovek</span><span class="p">,</span> <span class="s1">&#39;rekni&#39;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Has David&#39;</span><span class="p">)</span>

<span class="c1">### Get all objects and values</span>

<span class="nb">print</span><span class="p">(</span><span class="n">Clovek</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>

<span class="c1">### Get all instances name</span>
<span class="kn">import</span> <span class="nn">gc</span>
<span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">gc</span><span class="o">.</span><span class="n">get_objects</span><span class="p">():</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Clovek</span><span class="p">):</span>
        <span class="nb">print</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">jmeno</span><span class="p">)</span>
</pre></div>
</div>
<section id="magic-methods-dunder-methods">
<h2>Magic methods (dunder methods)<a class="headerlink" href="#magic-methods-dunder-methods" title="Permalink to this headline">¶</a></h2>
<p>You can overwrite some default functions to have specific feature for your class. For example if your object is vector, you can redefine function for adding to be able to use <code class="docutils literal notranslate"><span class="pre">vector1</span> <span class="pre">+</span> <span class="pre">vector2</span></code>, which would otherwise failed.</p>
<p>Example <strong>call</strong> method (Allow input of object to function)</p>
<p>The __call** method can be used to turn the instances of the class into callables. Functions are callable objects. A callable object is an object which can be used and behaves like a function but might not be a function. By using the __call** method it is possible to define classes in a way that the instances will be callable objects. The __call__ method is called, if the instance is called “like a function”, i.e. using brackets. The following example defines a class with which we can create abitrary polynomial functions:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>class Polynomial:

    def __init__(self, *coefficients):

        self.coefficients = coefficients[::-1]

    def __call__(self, x):

        res = 0

        for index, coeff in enumerate(self.coefficients):

            res += coeff * x** index

            return res

p1 = Polynomial(42)
p2 = Polynomial(0.75, 2)
p3 = Polynomial(1, -0.5, 0.75, 2)

for i in range(1, 10):
    print(i, p1(i), p2(i), p3(i))
</pre></div>
</div>
<p>Magic methods (For example for change of + behavior)
What happens when we create an object in python class ?</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&#39;&#39;&#39;
List of magic methods:
Binary Operators

Operator           Method\
+                       object.__add__(self, other)\
-                        object.__sub__(self, other)\
*                        object.__mul__(self, other)\
//                       object.__floordiv__(self, other)\
/                        object.__div__(self, other)\
%                      object.__mod__(self, other)\
**                      object.__pow__(self, other[, modulo])\
&lt;&lt;                     object.__lshift__(self, other)\
&gt;&gt;                     object.__rshift__(self, other)\
&amp;                       object.__and__(self, other)\
^                       object.__xor__(self, other)\
|                        object.__or__(self, other)

Assignment Operators:

Operator          Method\
+=                     object.__iadd__(self, other)\
-=                      object.__isub__(self, other)\
*=                      object.__imul__(self, other)\
/=                      object.__idiv__(self, other)\
//=                     object.__ifloordiv__(self, other)\
%=                    object.__imod__(self, other)\
**=                     object.__ipow__(self, other[, modulo])\
&lt;&lt;=                   object.__ilshift__(self, other)\
&gt;&gt;=                   object.__irshift__(self, other)\
&amp;=                     object.__iand__(self, other)\
^=                      object.__ixor__(self, other)\
|=                      object.__ior__(self, other)

Unary Operators:

Operator          Method\
-                       object.__neg__(self)\
+                      object.__pos__(self)\
abs()                object.__abs__(self)\
~                      object.__invert__(self)\
complex()        object.__complex__(self)\
int()                  object.__int__(self)\
long()               object.__long__(self)\
float()               object.__float__(self)\
oct()                object.__oct__(self)\
hex()               object.__hex__(self)

Comparison Operators

Operator Method\
&lt;                      object.__lt__(self, other)\
&lt;=                    object.__le__(self, other)\
==                    object.__eq__(self, other)\
!=                     object.__ne__(self, other)\
&gt;=                    object.__ge__(self, other)\
&gt;                      object.__gt__(self, other)
&#39;&#39;&#39;

# Let&#39;s take an example to override the functionality &quot;+&quot; &#39;[__add__]&#39; operator

class  Vector(object):
    def __init__(self,  *args):
        &quot;&quot;&quot; Create a vector, example: v = Vector(1,2) &quot;&quot;&quot;
        if len(args)  ==  0:
            self.values =  (0,0)
        else:
            self.values = args
    def __add__(self, other):
        &quot;&quot;&quot; Returns the vector addition of self and other &quot;&quot;&quot;
        added = tuple(a + b for a, b in zip(self.values, other.values)  )
        return  Vector(*added)

# Now use the &quot;+&quot; operator with two vectors

v1 =  Vector(1,  2)
v2 =  Vector(10,  13)
v3 = v1 + v2
v3.values  # (11,  15)

# When statement &quot;v3 = v1 + v2 &quot; executes &quot;__add__&quot; is called and it returns a new Vector object.
</pre></div>
</div>
<p><strong>Repr</strong></p>
<p>class Pizza:
def <strong>init</strong>(self, ingredients):
self.ingredients = ingredients</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>def __repr__(self):
    return f&#39;Pizza({self.ingredients!r})&#39;
</pre></div>
</div>
<p>If Pizza() return <strong>repr</strong></p>
</section>
</section>
<section id="bitwise-operations">
<h1>Bitwise operations<a class="headerlink" href="#bitwise-operations" title="Permalink to this headline">¶</a></h1>
<p>Unsigned integers can hold bigger values, but cannot be negative!!!</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">### Convert number to bits</span>

<span class="n">binn</span> <span class="o">=</span> <span class="nb">bin</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>  <span class="c1"># 0b1111011</span>

<span class="c1"># Or</span>

<span class="n">four_bytes</span> <span class="o">=</span> <span class="mf">16.</span><span class="n">to_bytes</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">byteorder</span><span class="o">=</span><span class="s1">&#39;big&#39;</span><span class="p">,</span> <span class="n">signed</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">four_bytes</span><span class="p">)</span>

<span class="c1">### Convert with keep bit structure</span>

<span class="n">bin_number</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="mi">3</span><span class="si">:</span><span class="s1">08b</span><span class="si">}</span><span class="s1">&#39;</span>  <span class="c1"># 00000011</span>
<span class="n">bin_number</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="mi">3</span><span class="si">:</span><span class="s1">#08b</span><span class="si">}</span><span class="s1">&#39;</span>  <span class="c1"># 0b000011</span>

<span class="c1">### Bit length</span>

<span class="n">a</span><span class="o">.</span><span class="n">bit_length</span><span class="p">()</span>

<span class="c1"># Convert back to int again</span>

<span class="nb">int</span><span class="p">(</span><span class="s1">&#39;11111111&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># 255</span>

<span class="c1"># Or i = int.from_bytes(some_bytes, byteorder=&#39;big&#39;)</span>

<span class="c1"># Create empty bytes</span>
<span class="n">empty_bytes</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>

<span class="c1">### And, or etc...</span>

<span class="n">a</span> <span class="o">=</span> <span class="mi">60</span>            <span class="c1"># 60 = 0011 1100</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">13</span>            <span class="c1"># 13 = 0000 1101</span>
<span class="n">c</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1">### Bit and</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">&amp;</span> <span class="n">b</span><span class="p">;</span>        <span class="c1"># 12 = 0000 1100</span>

<span class="c1">### Bit or</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">|</span> <span class="n">b</span><span class="p">;</span>        <span class="c1"># 61 = 0011 1101</span>

<span class="c1">### bitwise exclusive or</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">^</span> <span class="n">b</span><span class="p">;</span>        <span class="c1"># 49 = 0011 0001</span>

<span class="c1">### Flip bits</span>
<span class="n">c</span> <span class="o">=</span> <span class="o">~</span><span class="n">a</span><span class="p">;</span>           <span class="c1"># -61 = 1100 0011</span>

<span class="c1"># Bit shift (4 bits)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">;</span>       <span class="c1"># 240 = 1111 0000</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">;</span>       <span class="c1"># 15 = 0000 1111</span>

<span class="c1"># Formating</span>
<span class="nb">bin</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{0:b}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="c1"># binary: 11111111</span>
<span class="nb">hex</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{0:x}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="c1"># hexadecimal: ff</span>
<span class="nb">oct</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{0:o}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="c1"># octal: 377</span>

</pre></div>
</div>
</section>
<section id="file-i-o">
<h1>File I/O<a class="headerlink" href="#file-i-o" title="Permalink to this headline">¶</a></h1>
<p><strong>Import fuction from other file</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>from math import sqrt  # First name of file, than function
</pre></div>
</div>
<p><strong>Find script’s adress</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>import os
# os.path.dirname(__file__)  # Not working in jupyter !
</pre></div>
</div>
<p><strong>Import variables from file in the same folder</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># import file  # Then call file.value
# from file import * # Now call just variable
</pre></div>
</div>
<p><strong>If file or dir exists</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>from pathlib import Path
my_file = Path(&quot;/path/to/file&quot;)
if my_file.is_file():  # File exists
    pass
if my_file.is_dir():  # Directory exists
    pass
if my_file.exists():   # File or dir exists
    pass
</pre></div>
</div>
<p><strong>Create module from folder</strong></p>
<p>Add file <code class="docutils literal notranslate"><span class="pre">__init.py__</span></code>
Inside do all imports from .autoregLNU import autoregLNU
Use relative imports with dots</p>
<p><strong>Show all files in folder</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># all_files = os.listdir(&quot;test/&quot;)
</pre></div>
</div>
<p><strong>Filter for one type data</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># txt_files = filter(lambda x: x[-4:]  ==  &#39;.txt&#39;, all_files)
</pre></div>
</div>
<p><strong>Count files with certain suffix</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>tifCounter = len(glob.glob1(myPath,&quot;*.tif&quot;))
</pre></div>
</div>
<p><strong>Load all files with certain suffix</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>import glob
imgs=glob.glob(&quot;*.png&quot;)  # Všechny obrázky ze složky

# Wildcard

for name in glob.glob(&#39;dir/file?.txt&#39;):
    print (name)

for name in glob.glob(&#39;dir/*[0-9].*&#39;):
    print (name)
</pre></div>
</div>
<p><strong>Add file names from folder to list</strong></p>
<p>data_names_list = list(glob.glob((script_dir / ‘*.dat’).as_posix()))</p>
<p><strong>Import txt</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>from numpy import loadtxt
# x=loadtxt(&#39;realna_data_klapky.txt&#39;)
</pre></div>
</div>
<section id="open-file">
<h2>Open file<a class="headerlink" href="#open-file" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>f = open(&quot;test.txt&quot;, &quot;w+&quot;) # open file in current directory

&#39;r&#39;  Open a file for reading. (default)
&#39;w&#39;  Open a file for writing. Creates a new file if it does not exist or truncates the file if it exists.
&#39;x&#39;  Open a file for exclusive creation. If the file already exists, the operation fails.
&#39;a&#39;  Open for appending at the end of the file without truncating it. Creates a new file if it does not exist.
&#39;t&#39;  Open in text mode. (default)
&#39;b&#39;  Open in binary mode.
&#39;+&#39;  Open a file for updating (reading and writing)


f = open(&quot;C:/Python33/README.txt&quot;) # specifying full path
f.close()

with open(&quot;test.txt&quot;,&#39;w&#39;)  as f:
    pass
f.write(&quot;my first file\n&quot;)
f.write(&quot;This file\n\n&quot;)
f.write(&quot;contains three lines\n&quot;)

!!!Use because this will autamatically close the file finally

f = open(&quot;test.txt&quot;,&#39;r&#39;,encoding =  &#39;utf-8&#39;)
f.read(4)  # Read the first 4 data - &#39;This&#39;
f.read(4)  # Read the next 4 data - &#39; is &#39;
f.read()  # Read in the rest till end of file - &#39;my first file\nThis file\ncontains three lines\n&#39;
f.read() # Further reading returns empty sting

# !!! After editing text, jump with cursor to the beginning before read
f.seek(0)
f.read()  # Return all
&#39;&#39;&#39;
</pre></div>
</div>
</section>
<section id="manipulate-with-files-move-copy">
<h2>Manipulate with files (move, copy)<a class="headerlink" href="#manipulate-with-files-move-copy" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&#39;&#39;&#39;
### Copy file ###

import shutil, os
s.chdir(&#39;C:\\&#39;)
shutil.copy(&#39;C:\\spam.txt&#39;, &#39;C:\\delicious&#39;)

### Copy folder with all files ###
shutil.copytree(&#39;C:\\bacon&#39;, &#39;C:\\bacon_backup&#39;)

### Move files ###
shutil.move(&#39;C:\\bacon.txt&#39;, &#39;C:\\eggs&#39;)

### Remove - move to trash bin ###
import send2trash
send2trash.send2trash(&#39;bacon.txt&#39;)

### Remove file ###
os.unlink(path)

### Remove folder with all content ###
shutil.rmtree(path)

### File tree - walk ###
import os

for folderName, subfolders, filenames in os.walk(&#39;C:\\delicious&#39;):
    print(&#39;The current folder is &#39; + folderName)

    for subfolder in subfolders:
        print(&#39;SUBFOLDER OF &#39; + folderName + &#39;: &#39; + subfolder)
    for filename in filenames:
        print(&#39;FILE INSIDE &#39; + folderName + &#39;: &#39;+ filename)
&#39;&#39;&#39;
</pre></div>
</div>
</section>
</section>
<section id="try-except">
<h1>Try – Except<a class="headerlink" href="#try-except" title="Permalink to this headline">¶</a></h1>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>try:
    print(znam)
except:
    print(&#39;except&#39;)
else:
    print(&#39;else&#39;)
finally:
    print(&#39;final&#39;)

try:
    print(neznam)
except:
    print(&#39;except&#39;)
else:
    print(&#39;else&#39;)
finally:
    print(&#39;final&#39;)
</pre></div>
</div>
<p><strong>Try for all errors and print it</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>try:
    linux_interaction()

except Exception as error:
    print(error)
</pre></div>
</div>
<p><strong>Raise exception</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># if somethingbad:
#   raise Exception(&#39;x should not exceed 5. The value of x was: {}&#39;)  # Better concrete error. E.g. ValueError...
</pre></div>
</div>
<p><strong>Raise in except block</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>try:
    1/0
except Exception:
    raise
</pre></div>
</div>
<p><strong>Assert - Require something or error</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>x = 5
assert (x &gt; 4), &#39;What happened&#39;
</pre></div>
</div>
<p><strong>Print error details in except block</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>import traceback

try:
    1/0
except Exception as e:
    print(traceback.format_exc())
</pre></div>
</div>
</section>
<section id="built-in-functions">
<h1>Built in functions<a class="headerlink" href="#built-in-functions" title="Permalink to this headline">¶</a></h1>
<p><strong>Print</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>a = &#39;hi&#39;
print(&#39;as&#39;, a, &#39;fegg&#39;) # Use comma, you can join strings and variables
</pre></div>
</div>
<p><strong>Range</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>x=range(3+1) # x = 0, 1, 2, 3
</pre></div>
</div>
<p><strong>Reversed</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>for i in reversed(range(5)):
    print(i) # 4, 3, 2, 1
</pre></div>
</div>
</section>
<section id="built-in-variables">
<h1>Built in variables<a class="headerlink" href="#built-in-variables" title="Permalink to this headline">¶</a></h1>
<p><strong>__name__</strong></p>
<p>If file is runned from inside or is imported, code inside condition will not be executed. If file itsel will be started, code will execute.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>if __name__ == &quot;__main__&quot;:
    pass
</pre></div>
</div>
</section>
<section id="built-in-modules">
<h1>Built in modules<a class="headerlink" href="#built-in-modules" title="Permalink to this headline">¶</a></h1>
<section id="sys">
<h2>Sys<a class="headerlink" href="#sys" title="Permalink to this headline">¶</a></h2>
<p><strong>Get size on memory</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>import sys
x = 2
sys.getsizeof(x)
</pre></div>
</div>
<p><strong>Add path to sys path</strong></p>
<p>sys.path.insert(0, “/path/to/your/package_or_module”)</p>
</section>
<section id="io">
<h2>io<a class="headerlink" href="#io" title="Permalink to this headline">¶</a></h2>
<p><strong>Capture everything printed plus warnings</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>import sys, io
stdout = sys.stdout
sys.stdout = io.StringIO()

warnings.warn(f&quot;asdefwefwg&quot;)
print(&quot;aho&quot;)

# get output and restore sys.stdout
output = sys.stdout.getvalue()
sys.stdout = stdout

print(output)
</pre></div>
</div>
</section>
<section id="os">
<h2>os<a class="headerlink" href="#os" title="Permalink to this headline">¶</a></h2>
<p><strong>Change working directory</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>import os
os.chdir(r&quot;C:\Users\...&quot;)
</pre></div>
</div>
<p><strong>Environment variables</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>import os
env_var = os.environ[&#39;ENV_VAR&#39;]
</pre></div>
</div>
</section>
<section id="pathlib-work-with-paths">
<h2>Pathlib - Work with paths<a class="headerlink" href="#pathlib-work-with-paths" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="c1"># Get path of running file</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="c1"># Get script path</span>
<span class="n">file_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>

<span class="c1"># If it has to also work in jupyterm, you cannot use __file__</span>
<span class="n">file_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">getframeinfo</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">())</span><span class="o">.</span><span class="n">filename</span><span class="p">))</span>

<span class="c1"># Directory path</span>
<span class="n">dir_path</span> <span class="o">=</span> <span class="n">file_path</span><span class="o">.</span><span class="n">parent</span>

<span class="c1"># Parents</span>
<span class="n">dir_path</span> <span class="o">=</span> <span class="n">file_path</span><span class="o">.</span><span class="n">parents</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

<span class="c1"># Combining paths</span>
<span class="n">file_to_open</span> <span class="o">=</span> <span class="n">data_folder</span> <span class="o">/</span> <span class="s2">&quot;subfolder&quot;</span> <span class="o">/</span> <span class="s2">&quot;raw_data.txt&quot;</span>

<span class="c1"># Current working directory</span>
<span class="n">path</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">()</span>

<span class="c1"># Pathlib as string</span>

<span class="n">path</span><span class="o">.</span><span class="n">as_posix</span><span class="p">()</span>

<span class="c1"># Find full adress</span>

<span class="n">path</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;test.md&#39;</span><span class="p">)</span>  <span class="c1"># test.md</span>
<span class="n">path</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span> <span class="c1"># /home/gahjelle/realpython/test.md&#39;</span>

<span class="c1"># Compare paths</span>
<span class="n">path</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span><span class="o">.</span><span class="n">parent</span> <span class="o">==</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">()</span> <span class="c1"># False</span>

<span class="c1"># Work with file</span>

<span class="n">filename</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;source_data/text_files/raw_data.txt&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">filename</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="c1"># prints &quot;raw_data.txt&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">filename</span><span class="o">.</span><span class="n">suffix</span><span class="p">)</span> <span class="c1"># prints &quot;txt&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">filename</span><span class="o">.</span><span class="n">stem</span><span class="p">)</span> <span class="c1"># prints &quot;raw_data&quot;</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Oops, file doesn&#39;t exist!&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Yay, the file exists!&quot;</span><span class="p">)</span>

<span class="c1"># Path of Desktop</span>
<span class="n">desktop</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">()</span> <span class="o">/</span> <span class="s2">&quot;Desktop&quot;</span>


<span class="sd">&#39;&#39;&#39;</span>

<span class="sd">!! Next rows just historical - Do not do it that way !!</span>

<span class="sd">from os import path</span>
<span class="sd">import os</span>

<span class="sd">file_path = path.relpath(&quot;data/data.txt&quot;)</span>

<span class="sd">### Absolute path</span>

<span class="sd"># os.path.abspath(\__file__)  # Not working in jupyter</span>

<span class="sd">### Add path to files and modules</span>

<span class="sd">import os</span>
<span class="sd">data_folder = &quot;folder/nextfolder/&quot;</span>
<span class="sd">file_to_open = data_folder + &quot;data.txt&quot;</span>

<span class="sd"># For example if jupyter do not see some files</span>

<span class="sd">script_dir0 = os.path.abspath(&#39;&#39;) # C:\VScode</span>

<span class="sd"># Next</span>

<span class="sd"># script_path = os.path.abspath(\__file__)  # i.e. /path/to/dir/foobar.py  - notworking with jupyter</span>
<span class="sd">script_path = &#39;C://prog&#39;</span>
<span class="sd">script_dir = os.path.split(script_path)[0]  #i.e. /path/to/dir/</span>
<span class="sd">rel_path =  &quot;2091/data.txt&quot;</span>
<span class="sd">abs_file_path = os.path.join(script_dir, rel_path)  # Result is relative &#39;/path/to/dir/2091/data.txt&#39;</span>
<span class="sd">filename = os.path.join(script_path,  &#39;../same.txt&#39;)  # We can use name of file</span>

<span class="sd">dir_path = os.path.dirname(os.path.realpath(__file__))  # We can use adress of file... but not in jupyter</span>

<span class="sd"># You can also do</span>

<span class="sd"># script_dir = os.path.dirname(\__file__)</span>
<span class="sd">rel_path = &quot;test_ data/realna_data_klapky.txt&quot;</span>
<span class="sd">abs_file_path = os.path.join(script_dir, rel_path)</span>
<span class="sd">&#39;&#39;&#39;</span>
</pre></div>
</div>
</section>
<section id="warnings">
<h2>Warnings<a class="headerlink" href="#warnings" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>import warnings
warnings.warn(&quot;Warning...........Message&quot;)

# Warnings with word &#39;HessianInversionWarning&#39; will be caused as errors

warnings.filterwarnings(&#39;error&#39;, message=r&quot;[\s\S]*HessianInversionWarning*&quot;)

# Errory of category depracation will be show everytime

warnings.filterwarnings(&#39;always&#39;, category=DeprecationWarning)
warnings.filterwarnings(&#39;ignore&#39;)  # Errory budou vždy ignorovány

# &quot;default&quot; will print the first occurrence of matching warnings for each location
# (module + line number) where the warning is issued

# Other possibilities

# &quot;once&quot;    |    &quot;error&quot;    |    &quot;ignore&quot;    |    &quot;always&quot;    |    &quot;module&quot;
</pre></div>
</div>
<p>print the first occurrence of matching warnings for each module where the warning is issued (regardless of line number)</p>
</section>
<section id="re-regular-expressions">
<h2>re - Regular expressions<a class="headerlink" href="#re-regular-expressions" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>regs = &#39;&#39;&#39;
import re

[]  A set of characters     &quot;[a-m]&quot;
\   Signals a special sequence (can also be used to escape special characters)      &quot;\d&quot;
.   Any character (except newline character)        &quot;he..o&quot;
^   Starts with     &quot;^hello&quot;
$   Ends with       &quot;world$&quot;
*   Zero or more occurrences        &quot;aix*&quot;
+   One or more occurrences         &quot;aix+&quot;
{}  Exactly the specified number of occurrences     &quot;al{2}&quot;
|   Either or       &quot;falls|stays&quot;

\A  Returns a match if the specified characters are at the beginning of the string  &quot;\AThe&quot;
\b  Returns a match where the specified characters are at the beginning or at the end of a word     r&quot;\bain&quot;
r&quot;ain\b&quot;

\B  Returns a match where the specified characters are present, but NOT at the beginning (or at the end) of a word  r&quot;\Bain&quot;
r&quot;ain\B&quot;

\d  Returns a match where the string contains digits (numbers from 0-9)     &quot;\d&quot;
\D  Returns a match where the string DOES NOT contain digits        &quot;\D&quot;
\s  Returns a match where the string contains a white space character       &quot;\s&quot;
\S  Returns a match where the string DOES NOT contain a white space character       &quot;\S&quot;
\w  Returns a match where the string contains any word characters (characters from a to Z, digits from 0-9, and the underscore _ character)         &quot;\w&quot;
\W  Returns a match where the string DOES NOT contain any word characters   &quot;\W&quot;
\Z  Returns a match if the specified characters are at the end of the string        &quot;Spain\Z&quot;

[arn]       Returns a match where one of the specified characters (a, r, or n) are present
[a-n]       Returns a match for any lower case character, alphabetically between a and n
[^arn]      Returns a match for any character EXCEPT a, r, and n
[0123]      Returns a match where any of the specified digits (0, 1, 2, or 3) are present
[0-9]       Returns a match for any digit between 0 and 9
[0-5][0-9]  Returns a match for any two-digit numbers from 00 and 59
[a-zA-Z]    Returns a match for any character alphabetically between a and z, lower case OR upper case
[+]         In sets, +, *, ., |, (), $,{} has no special meaning, so [+] means: return a match for any + character in the string

&#39;&#39;&#39;
</pre></div>
</div>
</section>
<section id="subprocess-run-shell-comands">
<h2>Subprocess - Run shell comands<a class="headerlink" href="#subprocess-run-shell-comands" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># Subprocess replace the os.system()
import subprocess

subprocess.run(&#39;ls&#39;)
p1 = subprocess.run([&#39;ls&#39;, &#39;-la&#39;]) # with capture__output=True only save to variable
print(p1.stdout)

# More general - can define stdout and more here
sts = subprocess.Popen(&quot;mycmd&quot; + &quot; myarg&quot;, shell=True).wait()
</pre></div>
</div>
</section>
<section id="pickle">
<h2>Pickle<a class="headerlink" href="#pickle" title="Permalink to this headline">¶</a></h2>
<p>Save file in binary format</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>import pickle
d = {&quot;a&quot;: 1, &quot;b&quot;: 2}
# with open(r&quot;someobject.pickle&quot;, &quot;wb&quot;) as output_file: cPickle.dump(d, output_file)
</pre></div>
</div>
<p>Load files</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># with open(r&quot;someobject.pickle&quot;, &quot;rb&quot;) as input_file: e = cPickle.load(input_file)
</pre></div>
</div>
<p>Result is <code class="docutils literal notranslate"><span class="pre">e</span> <span class="pre">=</span> <span class="pre">{&quot;a&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;b&quot;:</span> <span class="pre">2}</span></code></p>
</section>
<section id="time-and-datetime">
<h2>Time and datetime<a class="headerlink" href="#time-and-datetime" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>import datetime as dt
import time

### Print today&#39;s date

date = datetime.datetime.now().strftime(&#39;%d-%m-%Y&#39;)

### Measure time interval

start = time.time()
a = 6
end = time.time()
print(end - start)


### Wait for some time

time.sleep(1) # wait 1 second
</pre></div>
</div>
</section>
</section>
<section id="imported-libraries">
<h1>Imported libraries<a class="headerlink" href="#imported-libraries" title="Permalink to this headline">¶</a></h1>
<section id="tests">
<h2>Tests<a class="headerlink" href="#tests" title="Permalink to this headline">¶</a></h2>
<section id="pytest">
<h3>Pytest<a class="headerlink" href="#pytest" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Write test file</span>

<span class="c1"># Use assert functions</span>

<span class="k">def</span> <span class="nf">secti</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>

<span class="k">def</span> <span class="nf">test_secti</span><span class="p">():</span>
    <span class="k">assert</span> <span class="n">secti</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span>

<span class="n">pip</span> <span class="n">install</span> <span class="n">pytest</span>

<span class="n">pip</span> <span class="n">install</span> <span class="n">pytest</span><span class="o">-</span><span class="n">benchmark</span>
<span class="k">def</span> <span class="nf">test_my_function</span><span class="p">(</span><span class="n">benchmark</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">benchmark</span><span class="p">(</span><span class="n">test</span><span class="p">)</span>


<span class="c1"># Run test</span>

<span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pytest</span> <span class="o">-</span><span class="n">v</span> <span class="n">test_secteni</span><span class="o">.</span><span class="n">py</span>

<span class="c1"># Run tests in a module</span>
<span class="n">pytest</span> <span class="n">test_mod</span><span class="o">.</span><span class="n">py</span>

<span class="c1"># Run tests in a directory</span>
<span class="n">pytest</span> <span class="n">testing</span><span class="o">/</span>

<span class="c1"># Paraterize tests</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span>
        <span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;month&#39;</span><span class="p">,</span> <span class="s1">&#39;day&#39;</span><span class="p">],</span>
        <span class="p">[(</span><span class="mi">2015</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">24</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">24</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">2033</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">2048</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">)],</span>
<span class="p">)</span>

<span class="k">def</span> <span class="nf">test_some_holidays</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">day</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test a few sample holidays&quot;&quot;&quot;</span>
    <span class="n">holidays</span> <span class="o">=</span> <span class="n">isholiday</span><span class="o">.</span><span class="n">getholidays</span><span class="p">(</span><span class="n">year</span><span class="p">)</span>
    <span class="k">assert</span> <span class="p">(</span><span class="n">day</span><span class="p">,</span> <span class="n">month</span><span class="p">)</span> <span class="ow">in</span> <span class="n">holidays</span>
</pre></div>
</div>
</section>
<section id="doctest">
<h3>Doctest<a class="headerlink" href="#doctest" title="Permalink to this headline">¶</a></h3>
<p><strong>Directives</strong>
Ignore exception detail</p>
</section>
</section>
</section>
<section id="doctest-ignore-exception-detail">
<h1>doctest: +IGNORE_EXCEPTION_DETAIL<a class="headerlink" href="#doctest-ignore-exception-detail" title="Permalink to this headline">¶</a></h1>
<section id="command-line-arguments-argparse">
<h2>Command Line Arguments - argparse<a class="headerlink" href="#command-line-arguments-argparse" title="Permalink to this headline">¶</a></h2>
<p>If you want to call a script from terminal like <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">myscript.py</span></code> and want to add some optional arguments (one letter -a , -b etc. or word with two dashes –var)</p>
<p>Nowadays argparse is better and more often used than sys.argv, getopt</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>import argparse

parser = argparse.ArgumentParser(description=&#39;A tutorial of argparse!&#39;)
parser.add_argument(&#39;-l&#39;,&#39;--list&#39;, default=1, type=int, help=&quot;This is the &#39;l&#39; variable&quot;)
parser.add_argument(&quot;--education&quot;,
                    choices=[&quot;highschool&quot;, &quot;college&quot;, &quot;university&quot;, &quot;other&quot;],
                    required=True, type=str, help=&quot;Your name&quot;) # If type list, just append action=&#39;append&#39;

args = parser.parse_args()

# If error with jupyter, then !!!
par_args = parser.parse_known_args()
myarg = par_args[0].myarg

ed = args.education

if ed == &quot;college&quot; or ed == &quot;university&quot;:
    print(&quot;Has degree&quot;)
elif ed == &quot;highschool&quot;:
print(&quot;Finished Highschool&quot;)
else:
    print(&quot;Does not have degree&quot;)
</pre></div>
</div>
</section>
<section id="plots-graphs">
<h2>Plots, graphs<a class="headerlink" href="#plots-graphs" title="Permalink to this headline">¶</a></h2>
<section id="plotly">
<h3>Plotly<a class="headerlink" href="#plotly" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pltl</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>

<span class="s1">import plotly as plo</span>
<span class="s1">import cufflinks as cf</span>

<span class="s1">def plot_df(df, save_plot=0, save_plot_path=&quot;plot.html&quot;):</span>

<span class="s1">    cf.go_offline()</span>

<span class="s1">    if save_plot:</span>
<span class="s1">        fig = df.iplot(asFigure=True)</span>
<span class="s1">        plo.offline.plot(fig,filename=save_plot_path)</span>
<span class="s1">    else:</span>
<span class="s1">        df.iplot(kind=&#39;scatter&#39;, filename=&quot;ploot.html&quot;)</span>

<span class="s1">    return</span>


<span class="s1">import plotly as py</span>
<span class="s1"># import cufflinks as cf</span>

<span class="s1">fig = dict(data=data, layout=layout )</span>
<span class="s1">py.offline.plot(fig, filename=&#39;d3-cloropleth-map&#39;)</span>

<span class="s1"># or</span>

<span class="s1">init_notebook_mode(connected=True)</span>
<span class="s1">cf.go_offline()</span>

<span class="s1">data_ft_date.iplot(xTitle=&#39;Dates&#39;,yTitle=&#39;Returns&#39;,title=&#39;Returns&#39;)</span>


<span class="s1">### Plotly timeseries</span>

<span class="s1">py.plotly.iplot([{</span>
<span class="s1">    &#39;x&#39;: data_for_predicts_csv_trimmed.index,</span>
<span class="s1">    &#39;y&#39;: data_for_predicts_csv_trimmed[col],</span>
<span class="s1">    &#39;name&#39;: col</span>
<span class="s1">}  for col in data_for_predicts_csv_trimmed.columns])</span>

<span class="s1"># Or the same with cufflinks</span>
<span class="s1">cf.go_offline()</span>
<span class="s1">df.iplot(kind=&#39;scatter&#39;, filename=&#39;cufflinks/cf-simple-line&#39;)</span>

<span class="s1">### From matplotlib to plotly</span>

<span class="s1">plot_mpl(fig)</span>

<span class="s1">### Save picture</span>

<span class="s1">import plotly.io as pio</span>
<span class="s1">static_image_bytes = pio.to_image(fig, format=&#39;png&#39;)</span>
<span class="s1">&#39;&#39;&#39;</span>
</pre></div>
</div>
</section>
<section id="matplotlib">
<h3>Matplotlib<a class="headerlink" href="#matplotlib" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mtpltlb</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39; Just to not load in jupyter...</span>
<span class="s1">### Simple plot</span>

<span class="s1">import matplotlib.pyplot as plt</span>
<span class="s1">plt.plot(data)</span>

<span class="s1">### Load txt and plot it</span>

<span class="s1">from numpy import loadtxt # For one column txt</span>
<span class="s1">x = loadtxt(&#39;realna_data_klapky.txt&#39;)</span>
<span class="s1">figure(figsize=(20,5))</span>
<span class="s1">plot(x,&#39;-o&#39;,label=&quot;x&quot;);xlabel(&#39;i&#39;);ylabel(&#39;x [sec]&#39;);grid();title(&quot;realna_data_klapky.txt&quot;)</span>
<span class="s1">legend();show()</span>
<span class="s1">plt.savefig(&#39;fig1.png&#39;, dpi =  300) # uloží graf</span>

<span class="s1">### Jupyter plot one after one</span>

<span class="s1"># Use not show()</span>
<span class="s1">%matplotlib notebook</span>
<span class="s1">import matplotlib.pyplot as plt</span>
<span class="s1">import numpy as np</span>

<span class="s1">x = [1, 2, 3, 4, 5, 6]</span>

<span class="s1">fig, axes = plt.subplots()</span>
<span class="s1">axes.plot(range(10))</span>
<span class="s1">#figure one</span>


<span class="s1">fig, axes = plt.subplots()</span>
<span class="s1">axes.plot(range(10))</span>
<span class="s1">#figure two</span>


<span class="s1">fig, ((a,b),(c,d)) = plt.subplots(2,2)</span>
<span class="s1">a.plot(x, np.sin(x))</span>
<span class="s1">b.plot(x, np.cos(x))</span>
<span class="s1">c.plot(x, np.tan(x))</span>
<span class="s1">d.plot(x, np.tanh(x))</span>

<span class="s1">### Histogram</span>

<span class="s1">figure(figsize=(20,5))</span>
<span class="s1">nbins=int(round(1+3.3*log(N))) # Sturge&#39;s rule, but depend on data</span>
<span class="s1">xlabel(&quot;x&quot;);ylabel(&quot;number_of_bins&quot;),title(&quot;number_of_bins  - values x in intervals&quot;);grid()</span>
<span class="s1">a=hist(x,bins=nbins) # vraci dve pole a histogram, tj a[0]=number_of_bins, a[1]=intervaly</span>
<span class="s1">print &quot;number_of_bins=&quot;,a[0]</span>
<span class="s1">print &quot;intervaly =&quot;,a[1]</span>

<span class="s1">### Curves and points</span>

<span class="s1">x=arange(-600,100) #</span>
<span class="s1">mu=m1;sigma=sqrt(s2);print &quot;mu=&quot;,mu,&quot;sigma=&quot;,sigma</span>
<span class="s1">f=1/(sigma*sqrt(2*pi))*exp(-(((x-mu)/sigma)**2)/2)</span>
<span class="s1">figure(figsize=(20,5))</span>
<span class="s1">plot(x,f,&#39;g&#39;,label=&quot;f(x) spojita&quot;);grid()</span>
<span class="s1">plot(x_i,f_odhad,&#39;o&#39;,label=&quot;f(x) odhad z mereni pro nbin=&quot;+str(nbins)+&quot; intervalu&quot;)</span>
<span class="s1">legend()</span>

<span class="s1">### Two graphs</span>

<span class="s1">N=1000 # velikost výběru</span>
<span class="s1">x=random.uniform(-10,10,N)</span>
<span class="s1">x=random.randn(N)*1000-300</span>
<span class="s1">x=random.logistic(3, 10, N)</span>
<span class="s1">x=random.standard_t(3, N)</span>
<span class="s1">x=random.poisson(1, N)*.01+1000</span>
<span class="s1">nbins=int(round(1+3.3*log(N)))</span>
<span class="s1">figure(figsize=(20,5))</span>
<span class="s1">subplot(121);plot(x,&#39;-o&#39;);grid();xlabel(&#39;index vzorku dat&#39;);ylabel(&quot;x&quot;)</span>
<span class="s1">subplot(122)</span>

<span class="s1"># First number is how much rows and second how much columns</span>
<span class="s1"># Third number is which graph is it - first, second etc.</span>

<span class="s1">a = hist(x,nbins,normed=True)</span>
<span class="s1">grid(); ylabel(&quot;$</span><span class="se">\\</span><span class="s1">approx f(x)$&quot;); xlabel(&quot;x&quot;)</span>
<span class="s1">plt.tight_layout() # Pokud část jednoho překrývá druhý</span>
<span class="s1">plt.subplots_adjust(top=0.88)# po tight_layoutu je potřeba název umístit výš</span>
<span class="s1">subplots_adjust(wspace=.3) # Větší rozestupy mezi grafy</span>

<span class="s1">### Another way to do more plots</span>

<span class="s1">fig = plt.figure()</span>

<span class="s1">ax1 = plt.subplot(311)</span>

<span class="s1">ax2 = plt.subplot(312, sharex=ax1)  # Share axis</span>
<span class="s1">plt.ylabel(&quot;Error&quot;)</span>
<span class="s1"># Or rather  ax.set_ylabel(&#39;common ylabel&#39;)   - also for x</span>

<span class="s1">setp(ax2.get_xticklabels(), visible=False)  # To hide numbers on xaxis</span>
<span class="s1">ax3 = plt.subplot(313)</span>
<span class="s1">plt.ylabel(&quot;Weights&quot;)</span>

<span class="s1"># If interactive add   ax1.clear()</span>
<span class="s1">y_ref_pl, = ax1.plot(t, y_ref, label=&quot;Skutečnost&quot;); plt.xlabel(&#39;t&#39;)</span>
<span class="s1">y_pl, = ax1.plot(t, y, label=&quot;Identifikovaná&quot;)</span>
<span class="s1">plt.legend(loc=&quot;upper right&quot;)</span>

<span class="s1">e_pl, = ax2.plot(t, e)</span>

<span class="s1">w_all_pl = ax3.plot(t, w_all)</span>
<span class="s1">plt.ylabel(&quot;Hodnoty vah&quot;)</span>

<span class="s1">### More plots with one legend</span>

<span class="s1">plt.figure(figsize=(12,7))</span>
<span class="s1">plt.subplot(3, 1, 1)</span>
<span class="s1">plt.plot(t, yy, label=&#39;Predikce&#39;); plt.xlabel(&#39;t&#39;)</span>
<span class="s1">plt.plot(t, data, label=&#39;Skutečnost&#39;); plt.xlabel(&#39;t&#39;)</span>
<span class="s1">plt.legend(loc=&quot;upper right&quot;)  # prop={&#39;size&#39;: 6}   to change size</span>
<span class="s1">plt.ylabel(&quot;u4 predikované&quot;)</span>

<span class="s1"># Or</span>

<span class="s1">line_up, = plt.plot([1,2,3], label=&#39;Line 2&#39;)</span>
<span class="s1">line_down, = plt.plot([3,2,1], label=&#39;Line 1&#39;)</span>
<span class="s1">plt.legend(handles=[line_up, line_down])</span>

<span class="s1">### More plots with for cycle</span>

<span class="s1">for i in range(1,7):</span>
<span class="s1">plt.subplot(3, 2, i)</span>
<span class="s1">plt.plot(oknomean[i]);plt.grid(); plt.xlabel(&#39;t&#39;)</span>
<span class="s1">plt.ylabel(&quot;u</span><span class="si">{}</span><span class="s1">&quot;.format(i))</span>
<span class="s1">plt.suptitle(&quot;Klouzavý průměr okna&quot;, fontsize=20)</span>
<span class="s1">plt.tight_layout()</span>
<span class="s1">plt.subplots_adjust(top=0.88)</span>
<span class="s1">plt.show()</span>

<span class="s1">### Scatterplot</span>

<span class="s1">import numpy as np</span>
<span class="s1">import matplotlib.pyplot as plt</span>
<span class="s1">N = 60</span>
<span class="s1">g1 = (0.6 + 0.6 * np.random.rand(N), np.random.rand(N))</span>
<span class="s1">g2 = (0.4+0.3 * np.random.rand(N), 0.5*np.random.rand(N))</span>
<span class="s1">g3 = (0.3*np.random.rand(N),0.3*np.random.rand(N))</span>
<span class="s1">data = (g1, g2, g3)</span>
<span class="s1">colors = (&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;)</span>
<span class="s1">groups = (&quot;coffee&quot;, &quot;tea&quot;, &quot;water&quot;)</span>
<span class="s1">fig = plt.figure()</span>
<span class="s1">ax = fig.add_subplot(1, 1, 1, axisbg=&quot;1.0&quot;)</span>
<span class="s1">for data, color, group in zip(data, colors, groups):</span>
<span class="s1">x, y = data</span>
<span class="s1">ax.scatter(x, y, alpha=0.8, c=color, edgecolors=&#39;none&#39;, s=30, label=group)</span>
<span class="s1">plt.title(&#39;Matplot scatter plot&#39;)</span>
<span class="s1">plt.legend(loc=2)</span>
<span class="s1">plt.show()</span>

<span class="s1">### Text plot</span>

<span class="s1">import matplotlib.pyplot as plt</span>
<span class="s1">fig = [plt.figure](https://matplotlib.org/api/_as_gen/matplotlib.pyplot.figure.html#matplotlib.pyplot.figure &quot;View documentation for matplotlib.pyplot.figure&quot;)(figsize=(5, 1.5))</span>

<span class="s1">text = fig.text(0.5, 0.5, &#39;Hello path effects world!</span><span class="se">\n</span><span class="s1">This is the normal &#39;</span>
<span class="s1">    &#39;path effect.</span><span class="se">\n</span><span class="s1">Pretty dull, huh?&#39;,</span>
<span class="s1">    ha=&#39;center&#39;, va=&#39;center&#39;, size=20)</span>

<span class="s1">[plt.show](https://matplotlib.org/api/_as_gen/matplotlib.pyplot.show.html#matplotlib.pyplot.show &quot;View documentation for matplotlib.pyplot.show&quot;)()</span>

<span class="s1">### Log axis</span>

<span class="s1">plt.loglog(x, y)  # Both axis are log</span>

<span class="s1">&#39;&#39;&#39;</span>
</pre></div>
</div>
</section>
</section>
<section id="tables">
<h2>Tables<a class="headerlink" href="#tables" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>from prettytable import PrettyTable
models_table = PrettyTable()
models_table = PrettyTable().field_names = [&quot;City name&quot;, &quot;Area&quot;, &quot;Population&quot;, &quot;Annual Rainfall&quot;]
models_table = PrettyTable().add_row([&quot;Adelaide&quot;, 1295, 1158259, 600.5])
print (models_table)
</pre></div>
</div>
</section>
<section id="web">
<h2>Web<a class="headerlink" href="#web" title="Permalink to this headline">¶</a></h2>
<section id="requests-api-get-post">
<h3>Requests - API - GET, POST<a class="headerlink" href="#requests-api-get-post" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>rqsts = &#39;&#39;&#39;
import getpass
import requests
username = input(&#39;Username: &#39;)
Username: hroncok
password = getpass.getpass()   # Do not use...
Password:
r = requests.get(&#39;https://api.github.com/user&#39;, auth=(username, password))
r.status_code
r.headers[&#39;content-type&#39;]  # &#39;application/json; charset=utf8&#39;
r.encoding  # &#39;utf-8&#39;
r.text  # &#39;{&quot;login&quot;:&quot;hroncok&quot;...&#39;
r.json()  # {&#39;avatar_url&#39;: &#39;https://avatars.githubusercontent.com/u/2401856?v=3&#39;, ...}

# Session

session = requests.Session()
session.get(&#39;http://httpbin.org/cookies/set/mipyt/best&#39;)  #&lt;Response [200]&gt;
r = session.get(&#39;http://httpbin.org/cookies&#39;)
r.json()  # {&#39;cookies&#39;: {&#39;mipyt&#39;: &#39;best&#39;}}
session.headers.update({&#39;x-test&#39;: &#39;true&#39;})
r = session.get(&#39;http://httpbin.org/headers&#39;, headers={&#39;x-test2&#39;: &#39;true&#39;})
r.json()  # {&#39;headers&#39;: {&#39;Accept&#39;: &#39;*/*&#39;, &#39;Accept-Encoding&#39;: &#39;gzip, deflate&#39;, &#39;Connection&#39;: &#39;close&#39;, &#39;Cookie&#39;: &#39;mipyt=best&#39;, &#39;Host&#39;: &#39;httpbin.org&#39;, &#39;User-Agent&#39;: &#39;python-requests/2.19.1&#39;, &#39;X-Test&#39;: &#39;true&#39;, &#39;X-Test2&#39;: &#39;true&#39;}}
&#39;&#39;&#39;
</pre></div>
</div>
</section>
<section id="beautiful-soup-web-scrapping">
<h3>Beautiful soup - web scrapping<a class="headerlink" href="#beautiful-soup-web-scrapping" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># Stuff for soup
soup = &quot;&quot;&quot;
sample_html =  &#39;&#39;&#39;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Test&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;Heading!&lt;/h1&gt;
        &lt;p class=&quot;major_content&quot;&gt;Some content.&lt;/p&gt;
        &lt;p class=&quot;minor_content&quot;&gt;The important information is, that the key number is 23..&lt;/p&gt;
    &lt;/body&gt;
&lt;/html&gt;
&#39;&#39;&#39;

from bs4 import BeautifulSoup

# path to data
path = &quot;data/example1.html&quot;

# template for printing the output
sentence = &quot;{} {} is {} years old.&quot;

# load data
with open(path, &#39;r&#39;) as datafile:
    sample_html = datafile.read()

# create tree
soup = BeautifulSoup(sample_html, &quot;html.parser&quot;)

# get title and print it
title = soup.find(&quot;title&quot;)
print(title.text, &quot;\n&quot;)

# select all rows in table
table = soup.find(&quot;table&quot;,  {&quot;id&quot;: &quot;main_table&quot;})
table_rows = table.findAll(&quot;tr&quot;)

# iterate over table and print results
for row in table_rows:
    first_name = row.find(&quot;td&quot;, {&quot;class&quot;: &quot;first_name&quot;})
    last_name = row.find(&quot;td&quot;, {&quot;class&quot;: &quot;last_name&quot;})
    age = row.find(&quot;td&quot;, {&quot;class&quot;: &quot;age&quot;})
    if first_name and last_name and age:
        print(sentence.format(first_name.text, last_name.text, age.text))

# Print attributes
print(table.attrs)
{&#39;id&#39;: &#39;main_table&#39;}

### Parse sentence
import re
print(re.search(&#39;the key number is (.*).&#39;, sample_html).group(1))  # 23

## Create simplest http server

import SimpleHTTPServer
import SocketServer

PORT = 8000
ADDRESS = &quot;127.0.0.1&quot;

Handler = SimpleHTTPServer.SimpleHTTPRequestHandler

httpd = SocketServer.TCPServer((ADDRESS, PORT), Handler)

print (&quot;Serving at port&quot;, PORT)
httpd.serve_forever()
&quot;&quot;&quot;
</pre></div>
</div>
</section>
</section>
<section id="images-pictures">
<h2>Images, pictures<a class="headerlink" href="#images-pictures" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pctrs = &#39;&#39;&#39;
from PIL import Image
from resizeimage import resizeimage

## Show image

ax1.imshow(img)

## Resize

img = Image.open(im)
img = resizeimage.resize_contain(img, [100,100]) # nebo
img = img.resize((1250,890),Image.ANTIALIAS) # antialias

## Save

img.save(soubor[0]+&#39;_resized_&#39;+soubor, img.format)
img.close()

## Convert to black and white

img = img.convert(&#39;L&#39;) #Převede na černobílý

## Convert image to matrix

img=np.array(img)
&#39;&#39;&#39;
</pre></div>
</div>
</section>
<section id="mathematics-statistics-linear-algebra">
<h2>Mathematics, statistics, linear algebra<a class="headerlink" href="#mathematics-statistics-linear-algebra" title="Permalink to this headline">¶</a></h2>
<p>!! Matrix and liear algebra operations discussed in Numpy aray section !!</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">### Display nice math</span>

<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span><span class="p">,</span> <span class="n">Math</span><span class="p">,</span> <span class="n">Latex</span>
<span class="n">display</span><span class="p">(</span><span class="n">Math</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;F(k) = \int_{-\infty}^{\infty} f(x) e^{2\pi i k} dx&#39;</span><span class="p">))</span>

<span class="c1">### Square root ###</span>

<span class="n">y</span> <span class="o">=</span> <span class="mi">9</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># 3</span>

<span class="c1">### Round ###</span>

<span class="n">A</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="mf">5.76543</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="c1">### Natural log - e ###</span>

<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">e</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">e</span>  <span class="c1"># 2.71</span>

<span class="c1"># Or</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="c1">### Modulo ###</span>

<span class="n">a</span> <span class="o">=</span> <span class="mi">7</span> <span class="o">%</span> <span class="mi">3</span> <span class="c1"># =&gt; 1</span>

<span class="c1">### Power (x on y) ###</span>

<span class="n">a</span> <span class="o">=</span> <span class="mi">2</span><span class="o">**</span><span class="mi">4</span> <span class="c1"># =&gt; 16</span>

<span class="c1">### Describe - Statistical values of list ###</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">88</span><span class="p">])</span>
<span class="n">df</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>

    <span class="c1">#    count     4.000000</span>
    <span class="c1">#    mean     24.750000</span>
    <span class="c1">#    std      42.216703</span>
    <span class="c1">#    min       1.000000</span>
    <span class="c1">#    25%       3.250000</span>
    <span class="c1">#    50%       5.000000</span>
    <span class="c1">#    75%      26.500000</span>
    <span class="c1">#    max      88.000000</span>
    <span class="c1">#    dtype: float64</span>

<span class="c1">### Statistical values of array</span>

<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">77</span><span class="p">])</span>
<span class="n">stats</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

<span class="c1">## Random</span>
<span class="c1">### Random numbers in normal distribution</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">ran</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="n">q</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

    <span class="c1">#    [[ 1.33262386 -0.88922967 -0.07056098 0.27340112]</span>
    <span class="c1">#     [ 1.00664965 -0.68443807 0.43801295 -0.35874714]</span>
    <span class="c1">#     [ -0.19289416 -0.42746963 -1.80435223 0.02751727]]</span>

<span class="c1">### Random number everytime the same</span>

<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

<span class="n">w</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># [ 0.44122749 -0.33087015  2.43077119]</span>
<span class="n">w</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># [ 0.44122749 -0.33087015  2.43077119]</span>

<span class="c1">### Random numbers in normal distribution matrix shape</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>  <span class="c1"># Mu, Sigma,</span>

<span class="c1">## Points generation</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">1000</span><span class="p">)</span>  <span class="c1"># Generate numbers with the same interval (beginning, end, number)</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># 1, 2</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># 0, 1, 2</span>

<span class="c1">### Mean</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">],</span> <span class="p">[</span><span class="mi">40</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">60</span><span class="p">]])</span>
<span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="c1">### Standard deviation</span>

<span class="n">std</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="c1"># Or</span>

<span class="kn">from</span> <span class="nn">statistics</span> <span class="kn">import</span> <span class="n">stdev</span>
<span class="n">sample</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">std</span> <span class="o">=</span> <span class="n">stdev</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>

<span class="c1">### Bins</span>

<span class="n">bins</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">binss</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">bins</span><span class="p">)</span>  <span class="c1"># binss[0] hodnoty binss[1]</span>
    <span class="c1"># original = x = np.array([[10,20,30], [40,50,60]])</span>
    <span class="c1"># binss[0] = counts - [1 0 1 0 1 0 1 0 1 1]</span>
    <span class="c1"># binss[1] = values [10. 15. 20. 25. 30. 35. 40. 45. 50. 55. 60.]</span>

<span class="c1">### Cumulative sum</span>

<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="c1">### Derivation</span>

<span class="n">sample</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
    <span class="c1"># [ 1  6 -4  1]</span>

<span class="c1">### Latex dislay</span>

<span class="c1"># from IPython.display import display, Math, Latex</span>
<span class="c1"># display(Math(r&#39;F(k) = \int_{-\infty}^{\infty} f(x) e^{2\pi i k} dx&#39;))</span>


<span class="c1">########################################</span>
<span class="c1">####### Symbolic python - sympy #######</span>
<span class="c1">#######################################</span>

<span class="kn">import</span> <span class="nn">sympy</span> <span class="k">as</span> <span class="nn">sp</span>

<span class="c1">#  Nice display</span>
<span class="n">sp</span><span class="o">.</span><span class="n">init_printing</span><span class="p">()</span>

<span class="c1"># Or</span>
<span class="c1"># Or use sp.pprint()</span>

<span class="c1">### Display Latex</span>

<span class="n">sp</span><span class="o">.</span><span class="n">latex</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>

<span class="c1">### Create symbols</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">)</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">symbols</span><span class="p">(</span><span class="s1">&#39;x,y,z&#39;</span><span class="p">)</span>
<span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">f</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">symbols</span><span class="p">(</span><span class="s1">&#39;d:f&#39;</span><span class="p">)</span>
<span class="n">inf</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">oo</span>

<span class="c1">### Create one member (fraction) from more members</span>

<span class="n">ans</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">together</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="o">/</span><span class="n">y</span> <span class="o">+</span> <span class="mi">1</span><span class="o">/</span><span class="n">z</span><span class="p">)</span>
    <span class="c1">#   x*y + x*z + y*z</span>
    <span class="c1">#   ---------------</span>
    <span class="c1">#        x*y*z</span>

<span class="c1"># Imaginary numbers</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">*</span> <span class="n">sp</span><span class="o">.</span><span class="n">I</span>

<span class="c1">### Expand</span>

<span class="n">ans</span> <span class="o">=</span> <span class="p">((</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">expand</span><span class="p">()</span>
    <span class="c1">#    x**2 + 2*x*y + y**2</span>

<span class="c1">### Substitute</span>

<span class="n">expr</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">expr</span><span class="o">.</span><span class="n">subs</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1"># 1</span>

<span class="c1">### Compute string</span>

<span class="n">str_expr</span> <span class="o">=</span> <span class="s2">&quot;x**2 + 3*x - 1/2&quot;</span>
<span class="n">expr</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">sympify</span><span class="p">(</span><span class="n">str_expr</span><span class="p">)</span>

<span class="c1">### Simplify equation</span>

<span class="n">simplified</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">simplify</span><span class="p">((</span><span class="n">x</span><span class="o">**</span><span class="mi">3</span> <span class="o">+</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="n">x</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
    <span class="c1">#    𝑥−1</span>

<span class="c1">### Evaluate expression</span>

<span class="n">expr</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="n">expr</span><span class="o">.</span><span class="n">evalf</span><span class="p">()</span> <span class="c1"># 2.82842712474619</span>

<span class="c1">### Use numerical evaluation</span>

<span class="kn">import</span> <span class="nn">numpy</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">expr</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">lambdify</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">expr</span><span class="p">,</span> <span class="s2">&quot;numpy&quot;</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="c1"># [ 0.          0.84147098  0.90929743  0.14112001 -0.7568025  -0.95892427</span>
    <span class="c1">#  -0.2794155   0.6569866   0.98935825  0.41211849]</span>

    <span class="c1">### Combine with numpy</span>

<span class="n">y_vec</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">N</span><span class="p">(((</span><span class="n">x</span> <span class="o">+</span> <span class="n">pi</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">subs</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">xx</span><span class="p">))</span> <span class="k">for</span> <span class="n">xx</span> <span class="ow">in</span> <span class="n">x_vec</span><span class="p">])</span>  <span class="c1"># But lambdify is faster</span>

<span class="c1">### Solve equation</span>

<span class="n">solve</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>  <span class="c1"># [-1, 1]</span>
<span class="n">solve</span><span class="p">([</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">x</span> <span class="o">-</span> <span class="n">y</span> <span class="o">-</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">])</span>  <span class="c1"># {x:1,y:0}</span>

<span class="c1"># Exponential</span>
<span class="kn">from</span> <span class="nn">mpmath</span> <span class="kn">import</span> <span class="n">e</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="c1"># Matrices</span>

<span class="n">m11</span><span class="p">,</span> <span class="n">m12</span><span class="p">,</span> <span class="n">m21</span><span class="p">,</span> <span class="n">m22</span> <span class="o">=</span> <span class="n">symbols</span><span class="p">(</span><span class="s2">&quot;m11, m12, m21, m22&quot;</span><span class="p">)</span>
<span class="n">b1</span><span class="p">,</span> <span class="n">b2</span> <span class="o">=</span> <span class="n">symbols</span><span class="p">(</span><span class="s2">&quot;b1, b2&quot;</span><span class="p">)</span>

<span class="n">A</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">([[</span><span class="n">m11</span><span class="p">,</span> <span class="n">m12</span><span class="p">],[</span><span class="n">m21</span><span class="p">,</span> <span class="n">m22</span><span class="p">]])</span>
    <span class="c1">#   [ m11    m21</span>
    <span class="c1">#     m12    m22 ]</span>

<span class="n">b</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">([[</span><span class="n">b1</span><span class="p">],</span> <span class="p">[</span><span class="n">b2</span><span class="p">]])</span>
    <span class="c1">#   [ b1</span>
    <span class="c1">#     b2 ]</span>

<span class="c1"># Matrix operations</span>

<span class="n">sqr_mat</span> <span class="o">=</span> <span class="n">A</span><span class="o">**</span><span class="mi">2</span>
<span class="n">mat_mul</span> <span class="o">=</span> <span class="n">A</span><span class="o">*</span><span class="n">b</span>
<span class="n">det</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">det</span><span class="p">()</span>
<span class="n">inv</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">inv</span><span class="p">()</span>

<span class="c1">### Fast fourier transform</span>

<span class="kn">from</span> <span class="nn">numpy.fft</span> <span class="kn">import</span> <span class="n">fft</span><span class="p">,</span> <span class="n">fftfreq</span><span class="p">,</span> <span class="n">ifft</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>

<span class="n">ffty</span> <span class="o">=</span> <span class="n">fft</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

<span class="n">real_ffty</span> <span class="o">=</span> <span class="n">ffty</span><span class="o">.</span><span class="n">real</span>
<span class="n">imag_ffty</span> <span class="o">=</span> <span class="n">ffty</span><span class="o">.</span><span class="n">imag</span>

<span class="n">freqs</span> <span class="o">=</span> <span class="n">fftfreq</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>  <span class="c1"># Frequentions assigned to values - 0, 0.1, 0.2...</span>

<span class="c1">### Sympy plotting</span>

<span class="kn">from</span> <span class="nn">sympy.plotting</span> <span class="kn">import</span> <span class="n">plot</span>
<span class="n">p1</span> <span class="o">=</span> <span class="n">plot</span><span class="p">(</span><span class="n">sp</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>


<span class="c1">######################################</span>
<span class="c1">####### Differential equations #######</span>
<span class="c1">######################################</span>

<span class="kn">import</span> <span class="nn">sympy</span> <span class="k">as</span> <span class="nn">sp</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">Function</span><span class="p">(</span><span class="s1">&#39;f&#39;</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="n">eq</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">dsolve</span><span class="p">(</span><span class="n">eq</span><span class="p">,</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>

<span class="c1">###########################</span>
<span class="c1">####### Integration #######</span>
<span class="c1">###########################</span>

<span class="c1">### Unbounded integral</span>

<span class="kn">import</span> <span class="nn">sympy</span> <span class="k">as</span> <span class="nn">sp</span>
<span class="kn">from</span> <span class="nn">sympy</span> <span class="kn">import</span> <span class="n">exp</span> <span class="k">as</span> <span class="n">e</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">)</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">e</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="p">)</span>
<span class="n">disp</span><span class="p">(</span><span class="s2">&quot;f=&quot;</span><span class="p">,</span><span class="n">f</span><span class="p">)</span>
<span class="n">intf</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">integrate</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="n">disp</span><span class="p">(</span><span class="s2">&quot;\int &quot;</span> <span class="o">+</span> <span class="n">dfrac</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;dx=&quot;</span><span class="p">,</span><span class="n">intf</span><span class="p">)</span> <span class="c1"># po \int musim byt mezera</span>

<span class="c1">### Bounded integral</span>

<span class="n">intf</span><span class="o">=</span><span class="n">sp</span><span class="o">.</span><span class="n">integrate</span><span class="p">(</span><span class="n">f</span><span class="p">,(</span><span class="n">x</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">disp</span><span class="p">(</span><span class="s2">&quot;\int_0^1&quot;</span> <span class="o">+</span> <span class="n">dfrac</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot; dx=&quot;</span><span class="p">,</span><span class="n">intf</span><span class="o">.</span><span class="n">evalf</span><span class="p">())</span>

<span class="c1">###########################</span>
<span class="c1">####### Correlation #######</span>
<span class="c1">###########################</span>

<span class="c1">### Correlation matrix - values</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">78</span><span class="p">]],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span><span class="p">])</span>
<span class="n">x_cor</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>

    <span class="c1">#               one      two    three</span>
    <span class="c1">#    one    1.00000  1.00000  0.89977</span>
    <span class="c1">#    two    1.00000  1.00000  0.89977</span>
    <span class="c1">#    three  0.89977  0.89977  1.00000</span>

<span class="c1">### Correlation matrix - plot</span>

<span class="c1"># a = pd.plotting.scatter_matrix(df, figsize=(16,12), alpha=0.3)</span>

<span class="c1">### Correlation (Pearson corr. matrix)</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">scoreTable</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;pearson&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;pearson&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{:.2}</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">background_gradient</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="s1">&#39;coolwarm&#39;</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1">### Correlation coefficent</span>

<span class="n">ar</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">])</span>
<span class="n">ar2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">78</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">corrcoef</span><span class="p">(</span><span class="n">ar</span><span class="p">,</span> <span class="n">ar2</span><span class="p">)</span>

    <span class="c1">#    [[ 1.        -0.0475504]</span>
    <span class="c1">#     [-0.0475504  1.       ]]</span>

<span class="c1">##########################</span>
<span class="c1">####### Statistics #######</span>
<span class="c1">##########################</span>

<span class="c1">### Create combinations</span>

<span class="kn">from</span> <span class="nn">scipy.special</span> <span class="kn">import</span> <span class="n">binom</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">binom</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>

<span class="c1">### Test of normal distribution</span>

<span class="kn">from</span> <span class="nn">statsmodels.stats.stattools</span> <span class="kn">import</span> <span class="n">jarque_bera</span>
<span class="n">residuals</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">score</span><span class="p">,</span> <span class="n">pvalue</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">jarque_bera</span><span class="p">(</span><span class="n">residuals</span><span class="p">)</span>
<span class="k">if</span> <span class="n">pvalue</span> <span class="o">&lt;</span> <span class="mf">0.10</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;We have reason to suspect the residuals are not normally distributed.&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;The residuals seem normally distributed.&#39;</span><span class="p">)</span>

<span class="c1"># Machine learning</span>

<span class="c1">#################################################</span>
<span class="c1">####### Standardization and normalization #######</span>
<span class="c1">#################################################</span>

<span class="c1">### Standardization: mean = 0 and std = 1</span>

<span class="kn">from</span> <span class="nn">sklearn</span> <span class="kn">import</span> <span class="n">preprocessing</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">X_train</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span> <span class="mf">1.</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.</span><span class="p">,</span>  <span class="mf">2.</span><span class="p">],</span>
                    <span class="p">[</span> <span class="mf">2.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">],</span>
                    <span class="p">[</span> <span class="mf">0.</span><span class="p">,</span>  <span class="mf">1.</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.</span><span class="p">]])</span>

<span class="n">scaler</span> <span class="o">=</span> <span class="n">preprocessing</span><span class="o">.</span><span class="n">StandardScaler</span><span class="p">()</span>

<span class="n">fitted_scaler</span> <span class="o">=</span> <span class="n">scaler</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">)</span>
<span class="n">scaled</span> <span class="o">=</span> <span class="n">fitted_scaler</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X_train</span><span class="p">)</span>

    <span class="c1">#    [[ 0.  ..., -1.22...,  1.33...],</span>
    <span class="c1">#     [ 1.22...,  0.  ..., -0.26...],</span>
    <span class="c1">#     [-1.22...,  1.22..., -1.06...]]</span>

<span class="c1"># inverse transformation</span>
<span class="n">back</span> <span class="o">=</span> <span class="n">fitted_scaler</span><span class="o">.</span><span class="n">inverse_transform</span><span class="p">(</span><span class="n">scaled</span><span class="p">)</span>

<span class="c1">### Normalization (-1,1)</span>
<span class="c1"># Just replace one row from standard scaler</span>
<span class="n">scaler</span> <span class="o">=</span> <span class="n">preprocessing</span><span class="o">.</span><span class="n">MinMaxScaler</span><span class="p">(</span><span class="n">feature_range</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>

<span class="c1">### The same way you can use preprocessing.RobustScaler, that is not as much influenced by outliers !!</span>
</pre></div>
</div>
</section>
<section id="signal-processing-and-controll">
<h2>Signal processing and controll<a class="headerlink" href="#signal-processing-and-controll" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">## Signal</span>

<span class="kn">import</span> <span class="nn">scipy.signal</span> <span class="k">as</span> <span class="nn">sig</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">sg</span><span class="o">.</span><span class="n">sawtooth</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">100</span><span class="o">*</span><span class="n">t</span><span class="p">,</span><span class="mf">0.5</span><span class="p">)</span>  <span class="c1"># Create sawtooth signal</span>

<span class="c1">### Chirp signal</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">5001</span><span class="p">)</span>
<span class="n">w</span> <span class="o">=</span> <span class="n">sig</span><span class="o">.</span><span class="n">chirp</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">f0</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">f1</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">t1</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">)</span> <span class="c1"># (t, f0, t1, f1)  # Changing frequency</span>

<span class="c1">## Hanning window</span>

<span class="n">w</span> <span class="o">=</span> <span class="n">hanning</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>

<span class="c1">## Tuckey window</span>

<span class="n">w</span> <span class="o">=</span> <span class="n">sig</span><span class="o">.</span><span class="n">tukey</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>

<span class="c1">## Fourier transform</span>

<span class="n">dt</span> <span class="o">=</span> <span class="mf">1.</span><span class="o">/</span><span class="mi">1024</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">dt</span><span class="p">)</span>
<span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">sig</span><span class="o">.</span><span class="n">sawtooth</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="n">T1</span><span class="o">*</span><span class="n">t</span><span class="p">,</span><span class="mf">0.5</span><span class="p">)</span>

<span class="n">freq</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">fftfreq</span><span class="p">(</span><span class="n">N</span><span class="p">,</span><span class="n">dt</span><span class="p">)</span>  <span class="c1"># Return frequencies</span>
<span class="n">ffty</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">fft</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="n">rffty</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">real</span><span class="p">(</span><span class="n">ffty</span><span class="p">)</span>  <span class="c1"># Real part</span>
<span class="n">iffty</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">imag</span><span class="p">(</span><span class="n">ffty</span><span class="p">)</span>  <span class="c1"># Imaginary part</span>

<span class="c1">## Inverse Fourier transform</span>

<span class="n">y_back</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">ifft</span><span class="p">(</span><span class="n">ffty</span><span class="p">)</span>

<span class="c1">## Power spectral density</span>

<span class="n">PSD</span> <span class="o">=</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">ffty</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="n">N</span>

<span class="c1">## Hilbert transform - Envelope, phase, frequency</span>

<span class="n">analytic_signal</span> <span class="o">=</span> <span class="n">hilbert</span><span class="p">(</span><span class="n">signal</span><span class="p">)</span>
<span class="n">amplitude_envelope</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">analytic_signal</span><span class="p">)</span>
<span class="n">instantaneous_phase</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unwrap</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">angle</span><span class="p">(</span><span class="n">analytic_signal</span><span class="p">))</span>
<span class="n">instantaneous_frequency</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">instantaneous_phase</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mf">2.0</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span> <span class="o">*</span> <span class="n">fs</span><span class="p">)</span>

<span class="c1">### Filtering</span>

<span class="kn">import</span> <span class="nn">scipy.signal</span> <span class="k">as</span> <span class="nn">sig</span>
<span class="kn">from</span> <span class="nn">scipy.signal</span> <span class="kn">import</span> <span class="n">butter</span><span class="p">,</span><span class="n">filtfilt</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">501</span><span class="p">)</span>
<span class="n">w</span> <span class="o">=</span> <span class="n">sig</span><span class="o">.</span><span class="n">chirp</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">f0</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">f1</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">t1</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">)</span> <span class="c1"># (t, f0, t1, f1)</span>

<span class="n">Wn</span> <span class="o">=</span> <span class="mf">0.1</span>  <span class="c1"># zkuste pozorovat efekt nasobici konstanty na cinnost filtru</span>
<span class="n">filter_order</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="n">butter</span><span class="p">(</span><span class="n">filter_order</span><span class="p">,</span> <span class="n">Wn</span><span class="p">,</span> <span class="s1">&#39;high&#39;</span><span class="p">,</span> <span class="n">analog</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>  <span class="c1">#Matlab-style filter design</span>

<span class="n">x_dem</span> <span class="o">=</span> <span class="n">sig</span><span class="o">.</span><span class="n">lfilter</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>

<span class="c1"># Or</span>
<span class="n">x_dem</span> <span class="o">=</span> <span class="n">filtfilt</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>  <span class="c1"># Apply  filtr (forward and backward)</span>

<span class="c1"># You can use scipy or you can use controll</span>

<span class="c1">####################</span>
<span class="c1">##### Controll #####</span>
<span class="c1">####################</span>

<span class="c1">## State-space representation</span>

<span class="n">A</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.</span> <span class="p">,</span> <span class="mf">1.</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mf">1.</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.</span><span class="p">]]</span>
<span class="n">B</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.</span><span class="p">]]</span>
<span class="n">C</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.</span> <span class="p">,</span> <span class="mf">0.</span><span class="p">]</span>
<span class="n">D</span> <span class="o">=</span> <span class="mf">0.</span>

<span class="kn">import</span> <span class="nn">control</span> <span class="k">as</span> <span class="nn">ct</span>

<span class="n">sys</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">ss</span><span class="p">(</span><span class="n">A</span> <span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">D</span><span class="p">)</span>


<span class="c1">## Transfer function</span>

<span class="n">g</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">tf</span><span class="p">(</span><span class="mi">1</span> <span class="p">,[</span><span class="mi">1</span> <span class="p">,</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>  <span class="c1"># Or ct.tf(sys)</span>

    <span class="c1">#        1</span>
    <span class="c1">#   -----------</span>
    <span class="c1">#   s^2 + s + 1</span>

<span class="n">sys</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">ss</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>  <span class="c1"># Convert back from transfer to state space</span>

<span class="c1">## Convert from continuous to discrete</span>

<span class="n">g</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">tf</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="n">gd</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c2d</span> <span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">)</span>

    <span class="c1">#   4.983e-05 z + 4.967e-05</span>
    <span class="c1">#   -----------------------</span>
    <span class="c1">#     z^2 - 1.99 z + 0.99</span>

<span class="c1">## Interconnect systems</span>

<span class="c1">### Parallel</span>


    <span class="c1">#      2 s + 3</span>
    <span class="c1">#    -------------</span>
    <span class="c1">#    s^2 + 3 s + 2</span>


<span class="c1">#################</span>
<span class="c1">##### Scipy #####</span>
<span class="c1">#################</span>

<span class="c1"># You have to use float here. Not working for int...</span>

<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">signal</span>

<span class="n">sys</span> <span class="o">=</span> <span class="n">signal</span><span class="o">.</span><span class="n">StateSpace</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">D</span><span class="p">)</span>

<span class="c1">### Step response</span>

<span class="n">t1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">signal</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">sys</span><span class="p">)</span>

<span class="c1">################</span>
<span class="c1">### Simulate ###</span>
<span class="c1">################</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">101</span><span class="p">)</span>
<span class="n">u</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
<span class="n">u</span><span class="p">[</span><span class="mi">10</span><span class="p">:</span><span class="mi">50</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">;</span>  <span class="n">u</span><span class="p">[</span><span class="mi">50</span><span class="p">:]</span> <span class="o">=</span> <span class="mf">2.0</span>

<span class="n">t3</span><span class="p">,</span> <span class="n">y3</span><span class="p">,</span> <span class="n">x3</span> <span class="o">=</span> <span class="n">signal</span><span class="o">.</span><span class="n">lsim</span><span class="p">(</span><span class="n">sys</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">scipy.integrate</span> <span class="kn">import</span> <span class="n">odeint</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># function that returns dy/dt</span>
<span class="k">def</span> <span class="nf">model</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">t</span><span class="p">):</span>
    <span class="n">k</span> <span class="o">=</span> <span class="mf">0.3</span>
    <span class="n">dydt</span> <span class="o">=</span> <span class="o">-</span><span class="n">k</span> <span class="o">*</span> <span class="n">y</span>
    <span class="k">return</span> <span class="n">dydt</span>

<span class="c1"># initial condition</span>
<span class="n">y0</span> <span class="o">=</span> <span class="mi">5</span>

<span class="c1"># time points</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">20</span><span class="p">)</span>

<span class="c1"># solve ODE</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">odeint</span><span class="p">(</span><span class="n">model</span><span class="p">,</span><span class="n">y0</span><span class="p">,</span><span class="n">t</span><span class="p">)</span>

<span class="c1"># plot results</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;y(t)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1">### Simulate with time dependent input</span>

<span class="k">def</span> <span class="nf">fdxdt</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">t</span><span class="p">,</span><span class="n">u</span><span class="p">,</span><span class="n">Omega</span><span class="p">,</span><span class="n">eta</span><span class="p">,</span><span class="n">b0</span><span class="p">,</span><span class="n">b1</span><span class="p">):</span>    <span class="c1"># x=[x1 x2 ... xn]</span>
        <span class="n">dx1dt</span><span class="o">=-</span><span class="n">Omega0</span><span class="o">**</span><span class="mi">2</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">b0</span><span class="o">*</span><span class="n">u</span>
        <span class="n">dx2dt</span><span class="o">=-</span><span class="mi">2</span><span class="o">*</span><span class="n">eta</span><span class="o">*</span><span class="n">Omega0</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">b1</span><span class="o">*</span><span class="n">u</span><span class="o">+</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span><span class="p">(</span><span class="n">dx1dt</span><span class="p">,</span><span class="n">dx2dt</span><span class="p">)</span>

    <span class="n">dt</span><span class="o">=</span><span class="mf">.21</span>  <span class="c1">#[sec]</span>
    <span class="n">t</span><span class="o">=</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="n">dt</span><span class="p">)</span> <span class="p">;</span> <span class="n">N</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>  <span class="c1"># delka dat</span>
    <span class="n">Npul</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">N</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>   <span class="c1">#konverze na integer</span>

    <span class="n">u</span><span class="o">=</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">10</span><span class="o">*</span><span class="n">t</span><span class="p">)</span> <span class="p">;</span> <span class="n">u</span><span class="p">[</span><span class="n">Npul</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span><span class="o">=</span><span class="n">sign</span><span class="p">(</span><span class="n">u</span><span class="p">[</span><span class="n">Npul</span><span class="o">+</span><span class="mi">1</span><span class="p">:])</span>

    <span class="n">u</span><span class="o">=</span><span class="n">u</span><span class="o">*</span><span class="mi">1</span>

    <span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">4</span><span class="p">));</span><span class="n">grid</span><span class="p">()</span>
    <span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">u</span><span class="p">,</span><span class="s1">&#39;-*&#39;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;u(t)&quot;</span><span class="p">);</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;t&quot;</span><span class="p">);</span><span class="n">legend</span><span class="p">();</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;$Vstup \ u(t) \ se \ meni  \ se </span><span class="se">\</span>
<span class="s2">            \ vzorkovaci \ periodou \ \Delta t $=&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span> <span class="o">+</span><span class="s2">&quot; [sec] </span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">show</span><span class="p">()</span>

    <span class="kn">from</span> <span class="nn">scipy.integrate</span> <span class="kn">import</span> <span class="n">odeint</span>

    <span class="n">Omega0</span><span class="o">=</span><span class="mi">10</span>  <span class="p">;</span>  <span class="n">eta</span><span class="o">=</span><span class="mf">.1</span>  <span class="p">;</span>   <span class="n">b0</span><span class="o">=</span><span class="n">Omega0</span><span class="o">**</span><span class="mi">2</span>  <span class="p">;</span>  <span class="n">b1</span><span class="o">=</span><span class="mi">0</span>

    <span class="c1">#===============================</span>

    <span class="n">y</span><span class="o">=</span><span class="n">zeros</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
    <span class="n">x10</span><span class="o">=</span><span class="mi">0</span> <span class="p">;</span> <span class="n">x20</span><span class="o">=</span><span class="mi">0</span>  <span class="c1"># poc. podm</span>

    <span class="n">x0</span><span class="o">=</span><span class="p">[</span><span class="n">x10</span><span class="p">,</span><span class="n">x20</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">N</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">tt</span><span class="o">=</span><span class="p">[</span><span class="n">t</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">t</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]]</span>  <span class="c1"># [t1 t2]</span>
        <span class="n">x</span><span class="o">=</span><span class="n">odeint</span><span class="p">(</span><span class="n">fdxdt</span><span class="p">,</span><span class="n">x0</span><span class="p">,</span><span class="n">t</span><span class="p">,(</span><span class="n">u</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">Omega0</span><span class="p">,</span><span class="n">eta</span><span class="p">,</span><span class="n">b0</span><span class="p">,</span><span class="n">b1</span><span class="p">))</span> <span class="c1">#returns x=[ [x1(t1) x2(t1)] [x1(t2) x2(t2)]]</span>
    <span class="c1">#    x=odeint(fdxdt,x0,tt,args=(u[i],)) # &lt;-- pokud je jen jeden extra argument, musi se tak</span>
        <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">=-</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">x0</span><span class="o">=</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">,:]</span>  <span class="c1"># jako nove poc. podm pro dalsi integraci</span>

    <span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
    <span class="n">grid</span><span class="p">()</span>
    <span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="s2">&quot;-*&quot;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;y(t)...simulace scipy.integrate.odeint&quot;</span><span class="p">),</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;t [sec]&quot;</span><span class="p">),</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="database">
<h2>Database<a class="headerlink" href="#database" title="Permalink to this headline">¶</a></h2>
<section id="pyodbc-sqlalchemy">
<h3>pyodbc, sqlalchemy<a class="headerlink" href="#pyodbc-sqlalchemy" title="Permalink to this headline">¶</a></h3>
<p><strong>Read</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">server</span> <span class="o">=</span> <span class="s1">&#39;SERVER=</span><span class="si">{}</span><span class="s1">;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">server</span><span class="p">)</span>
<span class="n">database</span> <span class="o">=</span> <span class="s1">&#39;DATABASE=</span><span class="si">{}</span><span class="s1">;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">database</span><span class="p">)</span>
<span class="n">sql_params</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;DRIVER={ODBC Driver 13 for SQL Server};&#39;</span> <span class="o">+</span> <span class="n">server</span> <span class="o">+</span> <span class="n">database</span> <span class="o">+</span> <span class="s1">&#39;Trusted_Connection=yes;&#39;</span>

<span class="n">sql_conn</span> <span class="o">=</span> <span class="n">pyodbc</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">sql_params</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">sql_conn</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Write</strong></p>
<p>from sqlalchemy import create_engine
import urllib</p>
<p>params = urllib.parse.quote_plus(r’DRIVER={driver};SERVER={server};DATABASE={database};Trusted_Connection=yes’.format(driver=r’{SQL Server}’, server=server, database=database))
conn_str = ‘mssql+pyodbc:///?odbc_connect={}’.format(params)</p>
<p>engine = create_engine(conn_str)
dataframe_to_sql.to_sql(name=’FactProduction’, con=engine, schema=’Stage’, if_exists=’append’, index=False)</p>
</section>
</section>
<section id="gui">
<h2>GUI<a class="headerlink" href="#gui" title="Permalink to this headline">¶</a></h2>
<p><strong>VUE and EEl (Electron JS like library)</strong></p>
<p>You can use mypythontools pyvueeel for building an app with graphical interface. It contains working examples.</p>
</section>
<section id="misc">
<h2>Misc<a class="headerlink" href="#misc" title="Permalink to this headline">¶</a></h2>
<section id="jupyter">
<h3>Jupyter<a class="headerlink" href="#jupyter" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&quot;&quot;&quot;
# !  jupyter kernelspec list # Ukáže seznam kernelů
# !  jupyter kernelspec uninstall nazev # Odinstaluje kernel
## Install jupyter extensions

pip install jupyter_contrib_nbextensions &amp;&amp; jupyter contrib nbextension install

# Test if running on jupyter

if &#39;ipykernel&#39; in sys.modules:
    print(&#39;jup&#39;)

# Or

# if hasattr(builtins, &#39;__IPYTHON__&#39;):
#     print(&#39;IPython&#39;)
# else:
#     print(&#39;Nope&#39;)

## If jupyter and run from normal python

try:
    __IPYTHON__

    from IPython.terminal.embed import InteractiveShellEmbed
    ipshell = InteractiveShellEmbed()
    ipshell.dummy_mode = True
    ipshell.magic(&quot;%load_ext autoreload&quot;)
    ipshell.magic(&quot;%autoreload&quot;)

except NameError:
    print(&#39;No Jupyter&#39;)

## Run ipython in normal python

from IPython.terminal.embed import InteractiveShellEmbed

ipshell = InteractiveShellEmbed()
ipshell.dummy_mode = True
ipshell.magic(&quot;%timeit abs(-42)&quot;);

## Autoreload

#Reload all modules imported with %aimport every time before executing the Python code typed, so it is not necessary to reload kernel everytime some other file changed or new library wa installed

%load_ext autoreload
%autoreload  # Reload all modules (except those excluded by %aimport) automatically now.
%autoreload 0  # Disable automatic reloading.
%autoreload 1  # Reload all modules imported with %aimport every time before executing the Python code typed.
%autoreload 2  # Reload all modules (except those excluded by %aimport) every time before executing the Python code typed.
%aimport  # List modules which are to be automatically imported or not to be imported.
%aimport foo  # Import module ‘foo’ and mark it to be autoreloaded for %autoreload 1
%aimport -foo  # Mark module ‘foo’ to not be autoreloaded.


## Link

‚&#39;&#39;
[Link name](&lt;https://www.youtube.com/&gt;)
‚&#39;&#39;

## Image

‚&#39;&#39;
&lt;img src=&quot;img/Gini.png&quot; width=400&gt;
‚&#39;&#39;

## Youtube

    # from IPython.display import YouTubeVideo
    # YouTubeVideo(&#39;7VeUPuFGJHk&#39;)

## Show all images from folder

    import os
    from IPython.display import display, Image
    names = [f for f in os.listdir(&#39;../images/ml_demonstrations/&#39;) if f.endswith(&#39;.png&#39;)]
    for name in names[:5]:
        display(Image(&#39;../images/ml_demonstrations/&#39; + name, width=100))

## Jupyter themes

    pip install jupyterthemes
    jt -t monokai -T

    # Deactivate
    jt -r

## Matplotlib widget interactive backend

    %matplotlib widget
    from matplotlib import pyplot as plt
    fig, ax = plt.subplots()
    ax.plot([1,2,3], [4,3,2])
    # fig.show() is not necessary

    # If not working in jupyterlab, use in terminal
    #     jupyter labextension install @jupyter-widgets/jupyterlab-manager

    # Instead of magic you can use

    import matplotlib
    matplotlib.use(&#39;module://ipympl.backend_nbagg&#39;)

## Dark background of matplotlib for dark themes

    # ! pip install jupyterthemes

    In ~/.ipython/profile_default/startup  create startup.py file with

    import matplotlib.pyplot as plt
    from jupyterthemes import jtplot
    jtplot.style(theme=&#39;monokai&#39;, context=&#39;notebook&#39;, ticks=True, grid=False)

    # Then in extensions use theme-darcula
    # And in to ~\AppcmdData\Local\Programs\Python\Python37\Lib\site-packages\jupyterthemes\styles\monokai.less
    # Change on
    /* jtplot figure style */
    @axisFace:              #2b2b2b;
    @figureFace:            #2b2b2b;

## Ipywidgets

## Extensions

pip install jupyter_contrib_nbextensions

jupyter contrib nbextension install --user

### Enable extension (e.g. rise)
jupyter nbextension enable --py rise
&quot;&quot;&quot;
</pre></div>
</div>
</section>
</section>
</section>
<section id="performance">
<h1>Performance<a class="headerlink" href="#performance" title="Permalink to this headline">¶</a></h1>
<section id="profiling">
<h2>Profiling<a class="headerlink" href="#profiling" title="Permalink to this headline">¶</a></h2>
<section id="line-profiling">
<h3>Line profiling<a class="headerlink" href="#line-profiling" title="Permalink to this headline">¶</a></h3>
<p>Simplest and probably best way is to use jupyter, extensions and magic.
Simple example is in project-starter test profiling.ipynb <a class="reference external" href="https://github.com/Malachov/mypythontools/tree/master/content/project-starter/tests">here</a></p>
<p>If you want to use just python, you can</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>import line_profiler

def hoj():
    a = 2
    b = [1,2,3]

    return a * b

lp = line_profiler.LineProfiler()
lp_wrapper = lp(hoj)()
lp.print_stats()

# If inner function

from line_profiler import LineProfiler
import random

def do_other_stuff(numbers):
    s = sum(numbers)

def do_stuff(numbers):
    do_other_stuff(numbers)
    l = [numbers[i]/43 for i in range(len(numbers))]
    m = [&#39;hello&#39;+str(numbers[i]) for i in range(len(numbers))]

numbers = [random.randint(1,100) for i in range(1000)]
lp = LineProfiler()
lp.add_function(do_other_stuff)   # add additional function to profile
lp_wrapper = lp(do_stuff)
lp_wrapper(numbers)
lp.print_stats()
</pre></div>
</div>
<p><strong>Other profiling option</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># !  pip install snakeviz
# !  python -m cProfile -o program.prof my_program.py
# !  snakeviz program.prof
</pre></div>
</div>
<p><strong>Show memory profile to file</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>from memory_profiler import profile

def fu(a):
    print(&#39;content&#39;)

memory_profile = open(&#39;memory_profiler.log&#39;,&#39;w+&#39;)
profile_wrapped_function = profile(fu, stream=memory_profile)
profile_wrapped_function()

memory_profile.seek(0)
print(memory_profile.read())  # Or save to variable
memory_profile.close()
</pre></div>
</div>
</section>
</section>
<section id="garbage-collector">
<h2>Garbage collector<a class="headerlink" href="#garbage-collector" title="Permalink to this headline">¶</a></h2>
<p><strong>Force to empty memory</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>import gc
gc.collect()
</pre></div>
</div>
</section>
<section id="threading">
<h2>Threading<a class="headerlink" href="#threading" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>from concurrent.futures import ThreadPoolExecutor

executor = ThreadPoolExecutor(max_workers=3)
executor.submit(myFunction())

# Or use
with ThreadPoolExecutor(max_workers=3) as executor:
        future = executor.submit(task, (2))
        future = executor.submit(task, (3))
        future = executor.submit(task, (4))
</pre></div>
</div>
</section>
<section id="max-execution-time-function">
<h2>Max execution time function<a class="headerlink" href="#max-execution-time-function" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span><span class="o">,</span> <span class="nn">sys</span>

<span class="k">def</span> <span class="nf">watchdog</span><span class="p">(</span><span class="n">timeout</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="s2">&quot;Time-limited execution.&quot;</span>
    <span class="k">def</span> <span class="nf">tracer</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">arg</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()):</span>
        <span class="s2">&quot;Helper.&quot;</span>
        <span class="n">now</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">now</span> <span class="o">&gt;</span> <span class="n">start</span> <span class="o">+</span> <span class="n">timeout</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">WatchdogTimeoutError</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">now</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">tracer</span> <span class="k">if</span> <span class="n">event</span> <span class="o">==</span> <span class="s2">&quot;call&quot;</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="n">old_tracer</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">gettrace</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">settrace</span><span class="p">(</span><span class="n">tracer</span><span class="p">)</span>
        <span class="n">code</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">settrace</span><span class="p">(</span><span class="n">old_tracer</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="k">return</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">a</span>

<span class="n">watchdog</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span> <span class="c1"># First element is time limit - Last argument 0.1 are *args and **kwargs</span>

<span class="c1"># Or</span>
<span class="n">mx_ex</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">from contextlib import contextmanager</span>
<span class="s1">import threading</span>
<span class="s1">import _thread</span>

<span class="s1">class TimeoutException(Exception):</span>
<span class="s1">    def __init__(self, msg=&#39;&#39;):</span>
<span class="s1">        self.msg = msg</span>

<span class="s1">@contextmanager</span>
<span class="s1">def time_limit(seconds, msg=&#39;&#39;):</span>
<span class="s1">    timer = threading.Timer(seconds, lambda: _thread.interrupt_main())</span>
<span class="s1">    timer.start()</span>
<span class="s1">    try:</span>
<span class="s1">        yield</span>
<span class="s1">    except KeyboardInterrupt:</span>
<span class="s1">        raise TimeoutException(&quot;Timed out for operation </span><span class="si">{}</span><span class="s1">&quot;.format(msg))</span>
<span class="s1">    finally:</span>
<span class="s1">        # if the acti   on ends in specified time, timer is canceled</span>
<span class="s1">        timer.cancel()</span>

<span class="s1">import time</span>
<span class="s1">with time_limit(5, &#39;slee&#39;):</span>
<span class="s1">    time.sleep(10)</span>
<span class="s1">&#39;&#39;&#39;</span>
</pre></div>
</div>
</section>
<section id="numba">
<h2>Numba<a class="headerlink" href="#numba" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numba</span> <span class="k">as</span> <span class="nn">nb</span>

<span class="nd">@nb</span><span class="o">.</span><span class="n">jit</span><span class="p">(</span><span class="n">parallel</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># Or use  parallel=True</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
    <span class="k">return</span> <span class="mi">1</span>

<span class="c1"># More options possible</span>
<span class="nd">@nb</span><span class="o">.</span><span class="n">njit</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
    <span class="k">return</span> <span class="mi">1</span>

<span class="c1"># Or</span>

<span class="nd">@nb</span><span class="o">.</span><span class="n">jit</span><span class="p">(</span><span class="n">nopython</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># Or use  parallel=True, nogil=True, cache=True</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
    <span class="k">return</span> <span class="mi">1</span>

<span class="c1"># Or</span>

<span class="nd">@nb</span><span class="o">.</span><span class="n">vectorize</span>
<span class="k">def</span> <span class="nf">function</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="mi">1</span>

<span class="c1"># Or direct data formats</span>

<span class="kn">import</span> <span class="nn">numba</span> <span class="k">as</span> <span class="nn">nb</span>
<span class="nd">@nb</span><span class="o">.</span><span class="n">jit</span><span class="p">(</span><span class="n">nb</span><span class="o">.</span><span class="n">int32</span><span class="p">(</span><span class="n">nb</span><span class="o">.</span><span class="n">int32</span><span class="p">,</span> <span class="n">nb</span><span class="o">.</span><span class="n">int32</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">function</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>

<span class="c1">### Get numba dtype from other</span>

<span class="n">numba</span><span class="o">.</span><span class="n">typeof</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
<span class="n">array</span><span class="p">(</span><span class="n">float64</span><span class="p">,</span> <span class="mi">1</span><span class="n">d</span><span class="p">,</span> <span class="n">C</span><span class="p">)</span>

<span class="c1">### Evaluate chunk sizes</span>

    <span class="n">i</span> <span class="o">=</span> <span class="n">numba</span><span class="o">.</span><span class="n">cuda</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">x</span><span class="o">.</span><span class="n">size</span><span class="p">:</span>
        <span class="c1"># Do something</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="n">numba</span><span class="o">.</span><span class="n">cuda</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="c1">### Cuda in Numba ###</span>

<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">numba</span> <span class="kn">import</span> <span class="n">cuda</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>

<span class="nb">len</span><span class="p">(</span><span class="n">cuda</span><span class="o">.</span><span class="n">gpus</span><span class="p">)</span>  <span class="c1"># 1</span>

<span class="n">cuda</span><span class="o">.</span><span class="n">gpus</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>  <span class="c1"># b&#39;GeForce GTX 980M&#39;</span>

<span class="nd">@cuda</span><span class="o">.</span><span class="n">jit</span>
<span class="k">def</span> <span class="nf">mandelbrot_numba</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">iterations</span><span class="p">):</span>
    <span class="c1"># Matrix index.</span>
    <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">=</span> <span class="n">cuda</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">size</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="c1"># Skip threads outside the matrix.</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="n">size</span> <span class="ow">or</span> <span class="n">j</span> <span class="o">&gt;=</span> <span class="n">size</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="c1"># Run the simulation.</span>
    <span class="n">c</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">2</span> <span class="o">+</span> <span class="mf">3.</span> <span class="o">/</span> <span class="n">size</span> <span class="o">*</span> <span class="n">j</span> <span class="o">+</span>
        <span class="mi">1</span><span class="n">j</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.5</span> <span class="o">-</span> <span class="mf">3.</span> <span class="o">/</span> <span class="n">size</span> <span class="o">*</span> <span class="n">i</span><span class="p">))</span>
    <span class="n">z</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">iterations</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">z</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">10</span><span class="p">:</span>
            <span class="n">z</span> <span class="o">=</span> <span class="n">z</span> <span class="o">*</span> <span class="n">z</span> <span class="o">+</span> <span class="n">c</span>
            <span class="n">m</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">n</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">break</span>

    <span class="n">size</span> <span class="o">=</span> <span class="mi">40</span>
    <span class="n">iterations</span> <span class="o">=</span> <span class="mi">5</span>

    <span class="n">m</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">size</span><span class="p">,</span> <span class="n">size</span><span class="p">))</span>

    <span class="c1"># 16x16 threads per block.</span>
    <span class="n">bs</span> <span class="o">=</span> <span class="mi">16</span>
    <span class="c1"># Number of blocks in the grid.</span>
    <span class="n">bpg</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">size</span> <span class="o">/</span> <span class="n">bs</span><span class="p">)</span>
    <span class="c1"># We prepare the GPU function.</span>
    <span class="n">f</span> <span class="o">=</span> <span class="n">mandelbrot_numba</span><span class="p">[(</span><span class="n">bpg</span><span class="p">,</span> <span class="n">bpg</span><span class="p">),</span> <span class="p">(</span><span class="n">bs</span><span class="p">,</span> <span class="n">bs</span><span class="p">)]</span>

    <span class="n">f</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">iterations</span><span class="p">)</span>

<span class="c1"># Or</span>

<span class="kn">from</span> <span class="nn">numba</span> <span class="kn">import</span> <span class="n">cuda</span>
<span class="nd">@cuda</span><span class="o">.</span><span class="n">jit</span><span class="p">(</span><span class="n">device</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">function</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
</pre></div>
</div>
</section>
<section id="dask">
<h2>Dask<a class="headerlink" href="#dask" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dsk</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">import dask</span>

<span class="s1">@dask.delayed</span>
<span class="s1">def inc(x):</span>
<span class="s1">    return x + 1</span>

<span class="s1">@dask.delayed</span>
<span class="s1">def double(x):</span>
<span class="s1">    return x + 2</span>

<span class="s1">@dask.delayed</span>
<span class="s1">def add(x, y):</span>
<span class="s1">    return x + y</span>

<span class="s1">data = [1, 2, 3, 4, 5]</span>

<span class="s1">output = []</span>
<span class="s1">for x in data:</span>
<span class="s1">    a = inc(x)</span>
<span class="s1">    b = double(x)</span>
<span class="s1">    c = add(a, b)</span>
<span class="s1">    output.append(c)</span>

<span class="s1">total = dask.delayed(sum)(output)</span>
<span class="s1"># maybe add    total.compute()</span>
<span class="s1">&#39;&#39;&#39;</span>
</pre></div>
</div>
<p><strong>Dask formats</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>dsk_frmts = &#39;&#39;&#39;
import pandas as pd
import dask.array as da
import dask.dataframe as dd
x = da.random.random((20, 20), chunks=(10, 10))
res = x.dot(x.T).sum()
res.compute()

# Dataframes implement the Pandas API

df = pd.DataFrame([[1, 2, 3], [1, 5, 3], [5, 6, 7]], columns = [&#39;one&#39;, &#39;two&#39;, &#39;three&#39;])
dfdsk = dd.from_pandas(df, npartitions=1)

# Or dd.read_csv(&#39;adress&#39;)

from dask_ml.linear_model import LogisticRegression  # Dask-ML implements the Scikit-Learn API
lr = LogisticRegression()
lr.fit(dfdsk, dfdsk)

## Show task structure

.visualize()
&#39;&#39;&#39;
</pre></div>
</div>
</section>
</section>
<section id="miscellaneous">
<h1>Miscellaneous<a class="headerlink" href="#miscellaneous" title="Permalink to this headline">¶</a></h1>
<section id="push-own-library-to-pypi">
<h2>Push own library to PyPi<a class="headerlink" href="#push-own-library-to-pypi" title="Permalink to this headline">¶</a></h2>
<p>Mypythontools <a class="reference external" href="https://mypythontools.readthedocs.io/mypythontools.deploy.html">deploy</a> module can be use for this purpose (it’s usually one part of bigger pipeline).</p>
</section>
<section id="ci-cd">
<h2>CI/CD<a class="headerlink" href="#ci-cd" title="Permalink to this headline">¶</a></h2>
<p><strong>mypythontools.utils</strong></p>
<p>Check example on mypythontools <a class="reference external" href="https://github.com/Malachov/mypythontools/blob/master/mypythontools/utils.py">deploy module</a></p>
<p><strong>Travis CI - Automatic testing and deploying</strong></p>
<p>Check example on mypythontools <a class="reference external" href="https://github.com/Malachov/mypythontools/tree/master/content/project-starter/.travis.yml">project-starter</a></p>
</section>
<section id="create-documentation-sphinx">
<h2>Create documentation - Sphinx<a class="headerlink" href="#create-documentation-sphinx" title="Permalink to this headline">¶</a></h2>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pip install sphinx</span>

<span class="gp"># </span>And
<span class="go">pip install alabaster</span>

<span class="gp"># </span>Or
<span class="go">pip install sphinx_rtd_theme</span>

<span class="gp"># </span>And <span class="k">if</span> you want to use markdown
<span class="go">pip install recommonmark</span>
<span class="go">pip install sphinxcontrib-napoleon</span>

<span class="gp"># </span>Create documentation files

<span class="go">sphinx-quickstart</span>

<span class="gp"># </span>Use separate build and source: yes
</pre></div>
</div>
<p>Fill in the <code class="docutils literal notranslate"><span class="pre">config.py</span></code> and <code class="docutils literal notranslate"><span class="pre">index.rst</span></code></p>
<p>You can use mypythontools <a class="reference external" href="https://github.com/Malachov/mypythontools/tree/master/content/project-starter/docs/source">project-starterexample</a></p>
<p>You can build it locally with</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">make html</span>
</pre></div>
</div>
<p>Or you can make account on <a class="reference external" href="https://readthedocs.org/">readthedocs</a> - It’s free.
And the documentation will be automatically made on every github push to master.</p>
<section id="format">
<h3>Format<a class="headerlink" href="#format" title="Permalink to this headline">¶</a></h3>
<p><strong>code</strong>
If you use one bacticks around, it will have grey background. If you will use double backticks around, it will be also formated as code.</p>
</section>
</section>
<section id="snippets-examples">
<h2>Snippets - examples<a class="headerlink" href="#snippets-examples" title="Permalink to this headline">¶</a></h2>
<section id="measure-time">
<h3>Measure time<a class="headerlink" href="#measure-time" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">import timeit</span>
<span class="sd">import functools</span>

<span class="sd">def func(*args):</span>
<span class="sd">    a = 1</span>
<span class="sd">    return a</span>
<span class="sd">t = timeit.Timer(&#39;&#39;&#39;</span>
<span class="sd">import numpy as np</span>
<span class="sd">a = 12</span>
<span class="sd">&#39;&#39;&#39;, &#39;gc.enable()&#39;)</span>
<span class="sd">print(t.timeit(3))  # 3 - measure three times</span>

<span class="sd"># Or you can use</span>
<span class="sd">t = timeit.timeit(func)</span>

<span class="sd"># Measure time of function with inputs</span>
<span class="sd">t = timeit.Timer(functools.partial(func, (1, 2)))</span>
<span class="sd">print (t.timeit(20))</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
</section>
<section id="show-bytecode">
<h3>Show bytecode<a class="headerlink" href="#show-bytecode" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>import dis
dis.dis(&quot;dict()&quot;)

    #              0 LOAD_NAME                0 (dict)
    #              2 CALL_FUNCTION            0
    #              4 RETURN_VALUE
</pre></div>
</div>
</section>
<section id="encoding-json-with-python">
<h3>Encoding JSON with Python<a class="headerlink" href="#encoding-json-with-python" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>import json

data =  {
            &#39;a&#39;:  0,
            &#39;b&#39;:  9.6,
            &#39;c&#39;:  &quot;Hello World&quot;,
            &#39;d&#39;:  {
                    &#39;a&#39;:  4
            }
}

json_data = json.dumps(data)

# Notice how the keys are not sorted by default, you would have to add the sort_keys=True
</pre></div>
</div>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div id="logo">
    <a href="/">
        <img src="/_static/logo.svg" alt="Logo" width="120px">
    </a>
</div>

<div class="section" id="table-of-contents">

    <h1>Library</h1>

    <ul>
        <li><a href="/Databases.html">Databases</a></li>
        <li><a href="/Docker.html">Docker</a></li>
        <li><a href="/Git.html">Git</a></li>
        <li><a href="/Go.html">Go</a></li>
        <li><a href="/Javascript.html">Javascript</a></li>
        <li><a href="/Linux.html">Linux</a></li>
        <li><a href="/Python.html">Python</a></li>
        <li><a href="/Terminal.html">Terminal</a></li>
    </ul>

    <h2><a href="/genindex.html">Index</a></h2>

</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Daniel Malachov.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.5.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/Python.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/Malachov/docs" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>